# ä»»å‹™æ¸…å–®ï¼šè¾²æ°‘æ›† PWA â€” æ²‰æµ¸å¼æ™‚é–“è—è¡“å“

**è¼¸å…¥**ï¼šä¾†è‡ª `SDD_v1/` çš„è¨­è¨ˆæ–‡ä»¶  
**å‰ç½®éœ€æ±‚**ï¼šplan.mdï¼ˆå¿…å¡«ï¼‰ã€spec.mdï¼ˆå¿…å¡«ï¼‰ã€constitution.mdï¼ˆå¿…å¡«ï¼‰

**æ€§è³ª**ï¼šBrownfieldï¼ˆæ¼¸é€²å¼å¼·åŒ–ï¼‰â€”â€”å°ˆæ¡ˆå·²æœ‰å®Œæ•´å¯é‹ä½œä¹‹ç¨‹å¼ç¢¼åŸºç¤ã€‚æœ¬ä»»å‹™æ¸…å–®ç‚ºç³»çµ±åŒ–çš„ç›¤é»ã€é©—è­‰èˆ‡å¼·åŒ–è·¯ç·šåœ–ï¼Œè€Œéå¾é›¶å»ºç½®ã€‚

**çµ„ç¹”æ–¹å¼**ï¼šä»»å‹™ä¾ User Story åˆ†çµ„ï¼Œä»¥ä¾¿æ¯å€‹ Story å¯ç¨ç«‹å¯¦ä½œèˆ‡æ¸¬è©¦ã€‚

## æ ¼å¼ï¼š`[ID] [P?] [Story] Description`

- **[P]**ï¼šå¯å¹³è¡ŒåŸ·è¡Œï¼ˆä¸åŒæª”æ¡ˆã€ç„¡ç›¸ä¾æ€§ï¼‰
- **[Story]**ï¼šæ­¤ä»»å‹™æ‰€å±¬çš„ User Storyï¼ˆå¦‚ US1ã€US2ã€US3ï¼‰
- æè¿°ä¸­è«‹åŒ…å«ç²¾ç¢ºçš„æª”æ¡ˆè·¯å¾‘

## è·¯å¾‘å‘½åæ…£ä¾‹

- **åŸå§‹ç¢¼**ï¼š`src/scripts/{feature}/`, `src/styles/`, `src/components/`
- **éœæ…‹è³‡æº**ï¼š`public/assets/`
- **è¨­å®šæª”**ï¼šæ ¹ç›®éŒ„ `astro.config.mjs`, `tsconfig.json`, `package.json`
- **è¨­è¨ˆæ–‡ä»¶**ï¼š`SDD_v1/`

---

## éšæ®µ 1ï¼šå°ˆæ¡ˆåŸºç¤è¨­æ–½ç›¤é»èˆ‡é©—è­‰ï¼ˆå…±ç”¨åŸºç¤è¨­æ–½ï¼‰

**ç›®çš„**ï¼šç¢ºä¿å°ˆæ¡ˆéª¨æ¶ã€ä¾è³´é—œä¿‚èˆ‡å“è³ªå·¥å…·éˆå®Œæ•´å°±ç·’ï¼Œç‚ºå¾ŒçºŒæ‰€æœ‰ User Story çš„å¯¦ä½œ/é©—è­‰æä¾›ç©©å›ºåŸºç¤ã€‚

- [ ] T001 [P] é©—è­‰ TypeScript ç·¨è­¯è¨­å®šï¼šç¢ºèª `tsconfig.json` ä¸­ `@/` è·¯å¾‘åˆ¥åæ­£ç¢ºæŒ‡å‘ `src/`ï¼Œ`strict` æ¨¡å¼å•Ÿç”¨ï¼Œ`target` ç‚º ES2022+ã€‚è·¯å¾‘ï¼š`tsconfig.json`
- [ ] T002 [P] é©—è­‰ ESLint å“è³ªé–€æª»ï¼šåŸ·è¡Œ `npm run lint`ï¼Œç¢ºä¿ Zero Errorsã€‚ä¿®å¾©ä»»ä½•å·²çŸ¥çš„ lint é•è¦ã€‚è·¯å¾‘ï¼š`eslint.config.js`
- [ ] T003 [P] é©—è­‰ Ruff å“è³ªé–€æª»ï¼šåŸ·è¡Œ `ruff check .` å°æ‰€æœ‰ Python è…³æœ¬ (`scripts/`)ï¼Œç¢ºä¿ Zero Errorsã€‚è·¯å¾‘ï¼š`pyproject.toml`, `scripts/`
- [ ] T004 é©—è­‰å…¨åŸŸå‹åˆ¥å¥‘ç´„å®Œæ•´æ€§ï¼šæª¢æŸ¥ `src/scripts/types.ts` ä¸­æ‰€æœ‰ CustomEvent Payload å‹åˆ¥å®šç¾©æ˜¯å¦èˆ‡ `plan.md` äº‹ä»¶å¥‘ç´„æ¸…å–®ä¸€è‡´ã€‚ç¢ºèªç„¡ `any` å‹åˆ¥ä½¿ç”¨ã€‚è·¯å¾‘ï¼š`src/scripts/types.ts`
- [ ] T005 [P] é©—è­‰ Astro å»ºç½®é…ç½®ï¼šç¢ºèª `astro.config.mjs` ä¸­ PWA è¨­å®š (`@vite-pwa/astro`) æ­£ç¢ºï¼Œ`autoUpdate` ç­–ç•¥å•Ÿç”¨ã€‚è·¯å¾‘ï¼š`astro.config.mjs`
- [ ] T006 [P] é©—è­‰è³‡æºæ¸…å–®ç”Ÿæˆè…³æœ¬ï¼šåŸ·è¡Œ `scripts/generate-gallery-manifest.js` èˆ‡ `scripts/generate-audio-manifest.js`ï¼Œç¢ºèªè¼¸å‡ºèˆ‡ `src/scripts/generated/` ä¸‹çš„ manifest ä¸€è‡´ã€‚è·¯å¾‘ï¼š`scripts/`, `src/scripts/generated/`

**æª¢æŸ¥é»**ï¼šåŸºç¤è¨­æ–½é©—è­‰å®Œç•¢â€”â€”æ‰€æœ‰å“è³ªé–€æª»é€šéï¼Œå‹åˆ¥å¥‘ç´„èˆ‡å»ºç½®æµç¨‹æ­£å¸¸é‹ä½œã€‚

---

## éšæ®µ 1.5ï¼šç‹€æ…‹æ©Ÿæ ¸å¿ƒé‡æ§‹ï¼ˆUI æµæš¢åº¦å„ªåŒ–ï¼‰ğŸ”¥

**ç›®çš„**ï¼šè§£æ±ºä»£ç¢¼å¯©é–±ä¸­ç™¼ç¾çš„ 6 å€‹é—œéµå•é¡Œï¼ˆè¦‹ plan.md Â§ä»£ç¢¼å¯©é–±ç™¼ç¾èˆ‡å„ªåŒ–å»ºè­°ï¼‰ï¼Œå¾æ ¹æœ¬ä¸Šæ”¹å–„æ¨¡å¼è½‰æ›çš„åŸå­æ€§ã€ä¸€è‡´æ€§èˆ‡æµæš¢åº¦ã€‚æ­¤éšæ®µç‚ºå¾ŒçºŒæ‰€æœ‰ UI åŠŸèƒ½é©—è­‰çš„å‰æã€‚

**ç¨ç«‹æ¸¬è©¦**ï¼šåœ¨ Chrome DevTools Performance é¢æ¿éŒ„è£½æ¨¡å¼åˆ‡æ›éç¨‹ï¼Œç¢ºèªé›¶ Layout Shiftï¼›é«˜é »å£“åŠ›æ¸¬è©¦æ¨¡å¼æŒ‰éˆ•ï¼ˆâ‰¤100ms é–“éš”é€£çºŒé»æ“Š 20 æ¬¡ï¼‰ï¼Œç¢ºèªæ‡‰ç”¨ç©©å®šã€‚

### 1.5A â€” FSM è½‰ç§»å®ˆè¡›èˆ‡è½‰ç§»é–

- [ ] T200 [US*] å¯¦ä½œåˆæ³•è½‰ç§»è·¯å¾‘è¡¨ (Transition Table)ï¼šåœ¨ `stateManager.ts` æˆ–æ–°å»º `src/scripts/app/transitionTable.ts` ä¸­å®šç¾© `VALID_TRANSITIONS: Record<AppMode, AppMode[]>`ï¼Œåˆ—å‡ºæ¯å€‹æ¨¡å¼å…è¨±çš„ç›®æ¨™æ¨¡å¼ã€‚
  - ä¾æ“šï¼šplan.md Â§1.2 åˆæ³•è½‰ç§»è·¯å¾‘è¡¨
  - è·¯å¾‘ï¼š`src/scripts/app/stateManager.ts`
  - é©—æ”¶ï¼šå˜—è©¦éæ³•è½‰æ›ï¼ˆå¦‚ `Calendar â†’ Zen`ï¼‰ï¼Œ`console.warn` è¼¸å‡ºè­¦å‘Šä¸”è½‰æ›ä¸ç™¼ç”Ÿã€‚

- [ ] T201 [US*] å¯¦ä½œè½‰ç§»é– (Transition Lock) èˆ‡ä½‡åˆ—æ©Ÿåˆ¶ï¼šåœ¨ `eventOrchestrator.ts` çš„ `transitionMode()` ä¸­åŠ å…¥ `isTransitioning` é–èˆ‡ `transitionQueue: AppMode[]` ä½‡åˆ—ã€‚é–å®šæœŸé–“æ–°è«‹æ±‚æ’å…¥ä½‡åˆ—ï¼Œç•¶å‰è½‰æ›å®Œæˆå¾Œè‡ªå‹•è™•ç†ä½‡åˆ—é¦–é …ã€‚
  - ä¾æ“šï¼šplan.md Â§1.3 è½‰ç§»ç”Ÿå‘½é€±æœŸ
  - è·¯å¾‘ï¼š`src/scripts/app/eventOrchestrator.ts`
  - é©—æ”¶ï¼šé«˜é »å£“åŠ›æ¸¬è©¦ï¼ˆâ‰¤100ms é–“éš”é€£çºŒé»æ“Šæ¨¡å¼æŒ‰éˆ• 20 æ¬¡ï¼‰ï¼Œæ‡‰ç”¨ä¸å´©æ½°ã€æœ€çµ‚ç©©å®šåœ¨æ­£ç¢ºæ¨¡å¼ã€‚

### 1.5B â€” Body Class åŸå­æ›¿æ›

- [ ] T202 [US*] é‡æ§‹ `stateManager.setMode()` ç‚ºåŸå­ Class æ›¿æ›ï¼šç§»é™¤ç•¶å‰ã€Œå…ˆæ¸…ç©ºå…¨éƒ¨ class â†’ å†æ·»åŠ æ–° classã€çš„å¯«æ³•ã€‚æ”¹ç‚ºæ ¹æ“š `from â†’ to` çš„è½‰æ›è·¯å¾‘ï¼Œåœ¨ `requestAnimationFrame` å…§ã€Œå…ˆ add æ–° class â†’ å¾Œ remove èˆŠ classã€ã€‚
  - ä¾æ“šï¼šplan.md Â§2.1 åŸå­ Class æ›¿æ›è¡¨
  - è·¯å¾‘ï¼š`src/scripts/app/stateManager.ts`
  - é©—æ”¶ï¼šChrome Performance é¢æ¿éŒ„è£½ Calendarâ†’Artwork è½‰æ›ï¼Œé€å¹€æª¢æŸ¥ç¢ºèªç„¡ä¸­é–“å¹€ç¼ºå°‘ classã€‚CLS æŒ‡æ¨™ç‚º 0ã€‚

- [ ] T203 [P] [US*] å®šç¾© `TRANSITION_CLASS_MAP` å¸¸é‡ï¼šå»ºç«‹ `Record<string, { add: string[], remove: string[] }>` æ˜ å°„è¡¨ï¼Œkey ç‚º `"from->to"` æ ¼å¼ã€‚
  - ä¾æ“šï¼šplan.md Â§2.1 Atomic Class Swap Table
  - è·¯å¾‘ï¼š`src/scripts/app/stateManager.ts` æˆ– `src/scripts/app/transitionTable.ts`
  - é©—æ”¶ï¼šæ¶µè“‹æ‰€æœ‰ 8 æ¢åˆæ³•è½‰æ›è·¯å¾‘ï¼Œæ¯æ¢è·¯å¾‘çš„ add/remove é›†åˆæ­£ç¢ºã€‚

### 1.5C â€” è½‰æ›ç”Ÿå‘½é€±æœŸæ•´åˆ

- [ ] T204 [US*] å¯¦ä½œå››éšæ®µè½‰æ›ç”Ÿå‘½é€±æœŸï¼šå°‡ `modeHandler.applyModeSideEffects()` æ‹†åˆ†ç‚º `beforeExit(from)` / `beforeEnter(to)` / `performTransition()` / `afterEnter(to)` å››å€‹ç¨ç«‹æ–¹æ³•ï¼Œç¢ºä¿å‰¯ä½œç”¨åœ¨æ­£ç¢ºéšæ®µåŸ·è¡Œã€‚
  - ä¾æ“šï¼šplan.md Â§1.3 è½‰ç§»ç”Ÿå‘½é€±æœŸ + Â§6 è½‰æ›å‰¯ä½œç”¨æ¸…å–®
  - è·¯å¾‘ï¼š`src/scripts/hero/handlers/modeHandler.ts`
  - é©—æ”¶ï¼š
    - `beforeExit` éšæ®µï¼šè¨ˆæ™‚å™¨å·²æ¸…é™¤ã€é¢æ¿å·²é—œé–‰
    - `performTransition` éšæ®µï¼šæ‰€æœ‰ DOM æ›´æ–°åœ¨åŒä¸€ rAF å…§
    - `afterEnter` éšæ®µï¼šæ–°è¨ˆæ™‚å™¨å•Ÿå‹•ã€`mode-changed` äº‹ä»¶ç™¼é€

- [ ] T205 [US*] æ¸…ç†é¢æ¿ç‹€æ…‹æ´©æ¼ï¼šåœ¨ `stateManager.setMode()` ä¸­ï¼Œå°é panel-friendly æ¨¡å¼ï¼ˆ`artwork`, `zen`, `welcome`ï¼‰ä¸»å‹•å°‡ `activePanel` è¨­ç‚º `null` ä¸¦åŒæ­¥ `body[data-active-panel]`ã€‚
  - ä¾æ“šï¼šplan.md Â§ç™¼ç¾ 4
  - è·¯å¾‘ï¼š`src/scripts/app/stateManager.ts`
  - é©—æ”¶ï¼šåœ¨ Calendarï¼ˆä»Šæ—¥é¢æ¿é–‹å•Ÿç‹€æ…‹ï¼‰â†’ Artwork è½‰æ›å¾Œï¼Œ`stateManager.getState().activePanel` ç‚º `null`ã€‚

### 1.5D â€” IdleManager é‡æ§‹

- [ ] T206 [US*] é‡æ§‹ IdleManager ç‚ºä¸‰åŸŸè¨ˆæ™‚å™¨æ¶æ§‹ï¼šå°‡ç•¶å‰çš„ `idleTimer` + `artworkTimer` é›™è¨ˆæ™‚å™¨æ‹†åˆ†ç‚º `welcomeTimer` / `zenTimer` / `artworkSlideTimer` ä¸‰å€‹ç¨ç«‹è¨ˆæ™‚å™¨åŸŸï¼Œå„æœ‰ç¨ç«‹çš„å•Ÿå‹•/æ¸…é™¤/é‡ç½®é‚è¼¯ã€‚
  - ä¾æ“šï¼šplan.md Â§1.4 IdleManager é‡æ§‹æ–¹æ¡ˆ
  - è·¯å¾‘ï¼š`src/scripts/hero/idleManager.ts`
  - API è®Šæ›´ï¼š
    - æ–°å¢ `activateForMode(mode: AppMode): void`
    - æ–°å¢ `deactivateAll(): void`
    - æ”¹å `reset()` â†’ `resetInteraction()` (èªç¾©æ˜ç¢º)
    - æ–°å¢ `pauseSlideTimer()` / `resumeSlideTimer()`
  - é©—æ”¶ï¼š
    - Welcome æ¨¡å¼ï¼šåƒ… `welcomeTimer` (6s) æ´»èºï¼Œ`artworkSlideTimer` ä¸æ´»èº
    - Artwork æ¨¡å¼ï¼š`zenTimer` (15s) èˆ‡ `artworkSlideTimer` (5s) åŒæ™‚æ´»èº
    - ä½¿ç”¨è€…äº’å‹•ï¼šåƒ…é‡ç½®é–’ç½®è¨ˆæ™‚å™¨ï¼Œä¸å½±éŸ¿ `artworkSlideTimer`
    - ç„¡ 200ms debounce hackï¼ˆç§»é™¤ `lastToggleTime`)

- [ ] T207 [US*] ç§»é™¤ IdleManager ä¸­çš„ 200ms debounce hackï¼šè½‰ç§»é–ï¼ˆT201ï¼‰å–ä»£äº† debounce hack çš„åŠŸèƒ½ã€‚ç§»é™¤ `lastToggleTime` æ¬„ä½èˆ‡ 200ms æ™‚é–“æª¢æŸ¥é‚è¼¯ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/idleManager.ts`
  - é©—æ”¶ï¼š`lastToggleTime` ç›¸é—œä»£ç¢¼å·²ç§»é™¤ï¼Œå¿«é€Ÿæ¨¡å¼åˆ‡æ›ä»ç©©å®šï¼ˆç”±è½‰ç§»é–ä¿éšœï¼‰ã€‚

### 1.5E â€” UI å¯è¦‹æ€§çµ±ä¸€åŒ–

- [ ] T208 [US*] çµ±ä¸€ UI å…ƒç´ å¯è¦‹æ€§æ§åˆ¶ç‚º CSS-drivenï¼šå°‡ `modeUIManager.ts` èˆ‡ `layoutManager.ts` ä¸­é€é `style.display` / `style.opacity` æ§åˆ¶çš„æ¨¡å¼ç›¸é—œå¯è¦‹æ€§é‚è¼¯ï¼Œé·ç§»è‡³ CSS å±¤é€é body class å¾Œä»£é¸æ“‡å™¨çµ±ä¸€æ§åˆ¶ã€‚JS å±¤åƒ…è² è²¬åˆ‡æ› body classã€‚
  - ä¾æ“šï¼šplan.md Â§ç™¼ç¾ 6
  - éœ€æ–°å¢/ä¿®æ”¹çš„ CSS è¦å‰‡ï¼š
    ```css
    /* Hero Header å¯è¦‹æ€§ */
    body.immersion-mode:not(.mode-artwork) .hero-header { opacity: 0; pointer-events: none; }
    body.mode-artwork .hero-header .hero-info-strip { opacity: 0; pointer-events: none; }

    /* Dock å¯è¦‹æ€§ */
    body.initial-welcome .hero-dock-wrapper,
    body.immersion-mode:not(.mode-artwork) .hero-dock-wrapper { opacity: 0; pointer-events: none; }

    /* å¹´æœˆæŒ‰éˆ•å¯è¦‹æ€§ */
    body.mode-artwork #btnYearMonth { display: none; }
    ```
  - è·¯å¾‘ï¼š`src/styles/global.css`ï¼ˆæˆ– `hero/` å­ç›®éŒ„ï¼‰, `src/scripts/hero/ui/modeUIManager.ts`, `src/scripts/hero/ui/layoutManager.ts`
  - é©—æ”¶ï¼š`modeUIManager.ts` ä¸­ä¸å†ç›´æ¥æ“ä½œ `style.display` æˆ– `style.opacity` ä¾†æ§åˆ¶æ¨¡å¼ç›¸é—œçš„å¯è¦‹æ€§ã€‚

### 1.5F â€” å‹åˆ¥å®‰å…¨ä¿®è£œ

- [ ] T209 [P] [US*] æ¶ˆé™¤ `RenderHeroDetail.lunar` çš„ `any` å‹åˆ¥ï¼šå®šç¾© `LunarData` interface æ“·å– Lunar ç‰©ä»¶æ‰€éœ€çš„å…¬é–‹æ–¹æ³•ç°½åï¼Œæˆ–é‡æ§‹ import è·¯å¾‘è§£æ±ºå¾ªç’°ä¾è³´ã€‚
  - ä¾æ“šï¼šplan.md Â§ç™¼ç¾ 5 + æ†²ç«  Â§III
  - è·¯å¾‘ï¼š`src/scripts/types.ts`, `src/scripts/core/lunar.ts`
  - é©—æ”¶ï¼š`grep -r 'any' src/scripts/types.ts` çµæœç‚º 0ã€‚

### 1.5G â€” Fullscreen ç”Ÿå‘½é€±æœŸæ•´åˆ

- [ ] T210 [US3] å°‡ Fullscreen é‚è¼¯å¾ `uiManager.bindBackgroundClick()` é·ç§»è‡³è½‰æ›ç”Ÿå‘½é€±æœŸï¼š
  - ç§»é™¤ `uiManager.ts` ä¸­ `bindBackgroundClick()` å…§çš„ `this.toggleFullscreen(true/false)` å‘¼å«
  - åœ¨ `modeHandler.applyModeSideEffects()` é‡æ§‹ç‚ºå››éšæ®µç”Ÿå‘½é€±æœŸå¾Œï¼Œæ–¼ `afterEnter("zen")` ä¸­åŸ·è¡Œ `requestFullscreen()`ï¼Œæ–¼ `afterEnter("artwork")` ä¸­åŸ·è¡Œ `exitFullscreen()`ï¼ˆåƒ…åœ¨ `from === "zen"` æ™‚ï¼‰
  - ä¾æ“šï¼šplan.md Â§8 Fullscreen ç”Ÿå‘½é€±æœŸæ•´åˆæ–¹æ¡ˆ + æ†²ç«  Â§II Fullscreen ç”Ÿå‘½é€±æœŸæ•´åˆåŸå‰‡
  - è·¯å¾‘ï¼š`src/scripts/hero/uiManager.ts`, `src/scripts/hero/handlers/modeHandler.ts`
  - é©—æ”¶ï¼š`grep -r "requestFullscreen\|exitFullscreen" src/scripts/` åƒ…å‡ºç¾åœ¨ modeHandler.ts æˆ–å°ˆç”¨ transition lifecycle æ¨¡çµ„ä¸­ã€‚

- [ ] T211 [US3] ç‚º `fullscreenchange` listener åŠ å…¥è½‰ç§»é–å®ˆè¡›ï¼š
  - åœ¨ `fullscreenchange` handler ä¸­æª¢æŸ¥ `isTransitioning` ç‹€æ…‹
  - è‹¥é–å®šä¸­ï¼Œå°‡ `transition-mode: artwork` è«‹æ±‚æ’å…¥ä½‡åˆ—
  - è‹¥æœªé–å®šï¼Œæ­£å¸¸ dispatch `transition-mode`
  - ä¾æ“šï¼šplan.md Â§8 fullscreenchange äº‹ä»¶å®ˆè¡›
  - è·¯å¾‘ï¼š`src/scripts/hero/uiManager.ts` (é·ç§»è‡³ modeHandler.ts)
  - é©—æ”¶ï¼šåœ¨ Artworkâ†’Zen è½‰æ›å‹•ç•«é€²è¡Œä¸­æŒ‰ Escï¼Œä¸æœƒç”¢ç”Ÿé›™é‡è½‰æ›æˆ– console errorã€‚

### 1.5H â€” äº‹ä»¶èªç¾©ä¿®æ­£

- [ ] T212 [US*] é‡æ§‹ `toggle-grid` äº‹ä»¶èªç¾©ï¼š
  - å°‡ `eventOrchestrator.ts` ä¸­ `toggle-grid` handler çš„æ¨¡å¼åˆ‡æ›é‚è¼¯ç§»è‡³æŒ‰éˆ• handler å±¤
  - `btnDay` é»æ“Šæ™‚ï¼šç›´æ¥ dispatch `transition-mode` äº‹ä»¶ï¼ˆCalendarâ†’Artwork æˆ– Artworkâ†’Calendarï¼‰
  - `toggle-grid` äº‹ä»¶å›æ­¸ç´”ç²¹çš„æ—¥æ›†ç¶²æ ¼é¡¯ç¤º/éš±è—åŠŸèƒ½
  - ä¾æ“šï¼šplan.md Â§9 toggle-grid äº‹ä»¶èªç¾©é‡æ–°å®šç¾©
  - è·¯å¾‘ï¼š`src/scripts/app/eventOrchestrator.ts`, `src/scripts/hero/eventHandlers.ts`
  - é©—æ”¶ï¼š`toggle-grid` handler ä¸­ä¸å†åŒ…å« `transition-mode` dispatchã€‚

### 1.5I â€” Background Click æ¨¡å¼å®ˆè¡›

- [ ] T213 [US*] åœ¨èƒŒæ™¯ click handler åŠ å…¥æ¨¡å¼å®ˆè¡›ï¼š
  - åœ¨ `bindBackgroundClick()` çš„ handler é–‹é ­åŠ å…¥ `if (currentMode === "welcome") return;`
  - ç§»é™¤å° `#welcomeInteractionOverlay` çš„ CSS selector ä¾è³´
  - ä¾æ“šï¼šplan.md Â§11 äº‹ä»¶è¡çªèˆ‡å†’æ³¡æ§åˆ¶çŸ©é™£
  - è·¯å¾‘ï¼š`src/scripts/hero/uiManager.ts`
  - é©—æ”¶ï¼šWelcome æ¨¡å¼ä¸‹éš¨æ„é»æ“Šä¸è§¸ç™¼ background handlerã€‚

### 1.5J â€” inline style æ¸…é™¤

- [ ] T214 [US*] æ¸…é™¤ `layoutManager.updatePanelsForType()` ä¸­çš„ inline style æ“ä½œï¼š
  - å°‡ `style.opacity` / `style.display` / `style.pointerEvents` æ“ä½œæ”¹ç‚ºè¨­ç½® `body[data-active-panel]` å±¬æ€§
  - æ–°å¢å°æ‡‰çš„ CSS è¦å‰‡ï¼š`body[data-active-panel="today"] .hero-header { opacity: 0; pointer-events: none; }`
  - ä¾æ“šï¼šplan.md Â§ç™¼ç¾ 10 + æ†²ç«  Â§II å¯è¦‹æ€§å–®ä¸€æ§åˆ¶æº
  - è·¯å¾‘ï¼š`src/scripts/hero/ui/layoutManager.ts`, `src/styles/global.css`
  - é©—æ”¶ï¼š`layoutManager.ts` ä¸­ä¸å†åŒ…å« `style.opacity =` æˆ– `style.pointerEvents =` çš„æ¨¡å¼ç›¸é—œæ“ä½œã€‚

- [ ] T215 [P] [US*] æ¸…é™¤ `modeUIManager.updateArtworkModeUI()` ä¸­çš„ inline style æ“ä½œï¼š
  - å°‡ `infoStrip.style.opacity`ã€`toggleBtn.style.display`ã€`yearMonthBtn.style.display` ç­‰æ“ä½œé·ç§»è‡³ CSS è¦å‰‡
  - æ–°å¢ï¼š`body.mode-artwork .hero-info-strip { opacity: 0; pointer-events: none; }`
  - æ–°å¢ï¼š`body.mode-artwork #btnYearMonth { display: none; }`
  - ä¾æ“šï¼šplan.md Â§ç™¼ç¾ 10
  - è·¯å¾‘ï¼š`src/scripts/hero/ui/modeUIManager.ts`, `src/styles/hero/` æˆ– `src/styles/global.css`
  - é©—æ”¶ï¼š`modeUIManager.ts` ä¸­ `updateArtworkModeUI()` ä¸å†åŒ…å« `style.opacity =` / `style.display =`ã€‚

### 1.5K â€” éŒ¯èª¤æ¢å¾©æ©Ÿåˆ¶

- [ ] T216 [US*] å¯¦ä½œè½‰æ›éŒ¯èª¤æ¢å¾©èˆ‡å›æ»¾æ©Ÿåˆ¶ï¼š
  - åœ¨å››éšæ®µè½‰æ›ç”Ÿå‘½é€±æœŸå¤–å±¤åŒ…è£¹ try/catch/finally
  - catch ä¸­å‘¼å« `forceRecovery("calendar")` å¼·åˆ¶å›æ»¾è‡³ Calendar æ¨¡å¼
  - finally ä¸­ç„¡æ¢ä»¶é‡‹æ”¾è½‰ç§»é–ä¸¦è™•ç†ä½‡åˆ—
  - ä¾æ“šï¼šplan.md Â§12 éŒ¯èª¤æ¢å¾©èˆ‡å›æ»¾ç­–ç•¥
  - è·¯å¾‘ï¼š`src/scripts/app/eventOrchestrator.ts` æˆ– `src/scripts/hero/handlers/modeHandler.ts`
  - é©—æ”¶ï¼šDevTools Console ä¸­æ•…æ„ inject ç•°å¸¸è‡³ `performTransition()`ï¼Œæ‡‰ç”¨è‡ªå‹•æ¢å¾©è‡³ Calendarï¼Œè½‰ç§»é–é‡‹æ”¾ã€‚

### 1.5L â€” é«˜ç´šè¦–è¦ºå¯¦ä½œ (Premium Visuals)
- [ ] T217 [US*] å¯¦ä½œå±¤ç–Šç»ç’ƒæ…‹ CSS Utilityï¼šåœ¨ `src/styles/glass-card.css` ä¸­å¯¦ä½œ blur + 3% noise + 1px linear-gradient specular borderã€‚
- [ ] T218 [US*] å¯¦ä½œèƒŒæ™¯å‘¼å¸å‹•ç•«ï¼šåœ¨ `src/styles/hero.css` ä¸­ç‚º `.hero-background` å…§éƒ¨å®¹å™¨æ–°å¢ 60s å¾ªç’°ä¹‹ `scale(1.0) â†’ scale(1.06)` å‹•ç•«ã€‚
- [ ] T219 [US3] å¯¦ä½œ Zen æ¨¡å¼é¦–æ¬¡å¼•å° UIï¼šå»ºç«‹ `localStorage` æª¢æŸ¥é‚è¼¯ï¼Œåƒ…åœ¨é¦–æ¬¡é€²å…¥é¡¯ç¤º `#zenHint` ä¸¦åŸ·è¡Œ 4.5s æ·¡å‡ºå‹•ç•«ã€‚

### 1.5M â€” ç’°å¢ƒæ„ŸçŸ¥èˆ‡é«˜ç´šäº¤äº’ [æ–°å¢]

- [ ] T220 [US*] å¯¦ä½œè½‰æ›ä¸­æ–·ä¿è­·æ©Ÿåˆ¶ï¼šåœ¨ `eventOrchestrator.ts` ä½‡åˆ—è™•ç†é‚è¼¯ä¸­ï¼ŒåŠ å…¥å° `transitionend` çš„ç›£è½ï¼Œç¢ºä¿å‹•ç•«å®Œæˆå¾Œæ‰åŸ·è¡Œä¸‹ä¸€å€‹æ¨¡å¼è½‰æ›ï¼Œé¿å…ç‹€æ…‹è·³è®Šã€‚
  - ä¾æ“šï¼šplan.md Â§4 ä¸­æ–·ä¿è­·
- [ ] T221 [US3] å¯¦ä½œèƒŒæ™¯äº®åº¦æ¢æ¸¬å™¨ (Luminance Detector)ï¼š
  - åœ¨ `imageManager.ts` ä¸­æ–°å¢ Canvas æ¡æ¨£é‚è¼¯ï¼Œè¨ˆç®—åº•éƒ¨ Dock å€åŸŸäº®åº¦ã€‚
  - è§¸ç™¼ `luminance-changed` äº‹ä»¶ï¼Œç”± `ModeUIManager` çµ±ä¸€ç®¡ç† body class åˆ‡æ›ã€‚
  - ä¾æ“šï¼šplan.md Â§2 äº®åº¦æ„ŸçŸ¥
- [ ] T222 [US5] å¯¦ä½œå­£ç¯€æ’ç‰ˆç´°ç¯€ (Seasonal Typography)ï¼šåœ¨å„å­£ç¯€ä¸»é¡Œ CSS ä¸­ï¼Œè‡ªå®šç¾©æ’ç‰ˆè®Šæ•¸ï¼ˆ`--theme-letter-spacing`, `--theme-font-weight`ï¼‰ã€‚
  - ä¾æ“šï¼šplan.md Â§3 å­£ç¯€æ’ç‰ˆç´°ç¯€
- [ ] T223 [US1] å¯¦ä½œæ­¡è¿å¡ç‰‡ Hover äº’å‹•ï¼šåœ¨ `IdleManager` çš„ `welcomeTimer` é‚è¼¯ä¸­ï¼Œç›£è½æ­¡è¿å¡ç‰‡çš„ `mouseenter` èˆ‡ `mouseleave`ï¼Œæš«åœ/æ¢å¾©é€²å…¥ Zen æ¨¡å¼çš„è¨ˆæ™‚ã€‚
  - ä¾æ“šï¼šç”±å¯©é–±å»ºè­°æ–°å¢

**æª¢æŸ¥é»**ï¼šç‹€æ…‹æ©Ÿæ ¸å¿ƒé‡æ§‹èˆ‡é«˜ç´šæ„Ÿå„ªåŒ–å®Œæˆã€‚

---

## éšæ®µ 2ï¼šUser Story 1 â€” æ™ºèƒ½å„€å¼å•Ÿå‹•èˆ‡æ­¡è¿é«”é©— (Priority: P1) ğŸ¯ MVP

**ç›®æ¨™**ï¼šé©—è­‰ä¸¦å¼·åŒ–å¾è¼‰å…¥ç•«é¢åˆ°æ­¡è¿å¡ç‰‡æµ®ç¾çš„å®Œæ•´å„€å¼æµç¨‹ï¼Œç¢ºä¿é¦–å±é«”é©—çš„ç©©å®šæ€§èˆ‡æµæš¢åº¦ã€‚

**ç¨ç«‹æ¸¬è©¦**ï¼šåœ¨å…¨æ–°ç€è¦½å™¨ç’°å¢ƒï¼ˆç„¡å¿«å–ï¼‰ä¸‹é–‹å•Ÿé¦–é ï¼Œé©—è­‰é€²åº¦æ¢â†’æ­¡è¿å¡ç‰‡â†’é–’ç½®è‡ªå‹•è½‰å ´çš„å®Œæ•´æµç¨‹ã€‚

### US1 â€” è³‡æºè¼‰å…¥å™¨é©—è­‰èˆ‡å„ªåŒ–

- [ ] T010 [US1] é©—è­‰ ResourceLoader åŠ æ¬Šé€²åº¦è¿½è¹¤é‚è¼¯ï¼šç¢ºèªå…­æ®µæ¬Šé‡ï¼ˆæ ¸å¿ƒè…³æœ¬ 15%ã€é¦–åœ– 25%ã€å­—é«” 15%ã€è¼ªæ’­åœ– 15%ã€éŸ³è¨Š 10%ã€SW 20%ï¼‰æ­£ç¢ºç´¯åŠ è‡³ 100%ã€‚
  - è·¯å¾‘ï¼š`src/scripts/app/resourceLoader.ts`
  - é©—æ”¶ï¼šé€²åº¦æ¢å¾ 0% å‡å‹»æ¨é€²è‡³ 100%ï¼Œç„¡è·³èºæˆ–å¡é “ã€‚

- [ ] T011 [US1] é©—è­‰é‚è¼¯é–€é– (Logic Gate) æ©Ÿåˆ¶ï¼šé€²åº¦æ¢ä¸å¾—åœ¨æ”¶åˆ° `app-logic-ready` äº‹ä»¶å‰è·‘æ»¿ 100%ã€‚
  - è·¯å¾‘ï¼š`src/scripts/app/resourceLoader.ts`
  - é©—æ”¶ï¼šç§»é™¤ `app-logic-ready` ç™¼é€ç·šï¼Œè§€å¯Ÿé€²åº¦æ¢æ˜¯å¦å¡åœ¨ <100%ã€‚

- [ ] T012 [US1] é©—è­‰ 8 ç§’è¶…æ™‚ä¿è­·ï¼šæ¨¡æ“¬æ¥µæ…¢ç¶²è·¯ç’°å¢ƒï¼ˆChrome DevTools â†’ Slow 3Gï¼‰ï¼Œç¢ºèª 8 ç§’å¾Œå¼·åˆ¶é€²å…¥æ‡‰ç”¨ã€‚
  - è·¯å¾‘ï¼š`src/scripts/app/resourceLoader.ts`
  - é©—æ”¶ï¼š8 ç§’å¾Œé€²åº¦æ¢å¼·åˆ¶åˆ° 100%ï¼Œé®ç½©æº¶è§£æ­£å¸¸ã€‚

- [ ] T013 [P] [US1] é©—è­‰é¦–åœ–ç¢ºå®šæ€§é è¼‰ï¼šç¢ºèª `imageManager.ts` ä¸­ç•¶å­£é¦–å¼µåœ–ç‰‡ï¼ˆå¦‚ `spring/1.webp`ï¼‰è·¯å¾‘èˆ‡ `index.astro` é–‹å ´èƒŒæ™¯è·¯å¾‘å®Œå…¨ä¸€è‡´ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/imageManager.ts`, `src/pages/index.astro`
  - é©—æ”¶ï¼šç„¡é¦–åœ–é–ƒçˆï¼ˆå‰å¾Œè·¯å¾‘ä¸€è‡´ï¼‰ã€‚

- [ ] T014 [P] [US1] é©—è­‰å¹³è¡Œé ç†± (Parallel Warming)ï¼šç¢ºèª `imageManager.ts` ä½¿ç”¨ `Promise.all` ä½µç™¼é è¼‰æ‰€æœ‰å­£ç¯€åœ–ç‰‡ï¼Œè€Œéåºåˆ— for-loopã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/imageManager.ts`
  - é©—æ”¶ï¼šNetwork é¢æ¿é¡¯ç¤ºåœ–ç‰‡è«‹æ±‚åŒæ™‚ç™¼å‡ºã€‚

### US1 â€” æ­¡è¿æ¨¡å¼ (Welcome Mode) ç‹€æ…‹é©—è­‰

- [ ] T015 [US1] é©—è­‰æ­¡è¿æ¨¡å¼å•Ÿå‹•åºåˆ—ï¼š`AppController` å•Ÿå‹•å¾Œç™¼é€ `transition-mode: { to: 'welcome' }`ï¼Œç¢ºèª body åŠ å…¥ `initial-welcome` + `immersion-mode` é¡åˆ¥ã€‚
  - è·¯å¾‘ï¼š`src/scripts/app/appController.ts`, `src/scripts/hero/handlers/modeHandler.ts`
  - é©—æ”¶ï¼šDevTools Elements é¢æ¿ç¢ºèª body class æ­£ç¢ºã€‚

- [ ] T016 [US1] é©—è­‰è¼‰å…¥â†’æ­¡è¿é›¶æ™‚å·®åŒæ­¥ï¼šç¢ºèª `loader-finished` äº‹ä»¶è§¸ç™¼å¾Œï¼Œè¼‰å…¥é®ç½©æº¶è§£ï¼ˆopacity â†’ 0ï¼‰èˆ‡æ­¡è¿å¡ç‰‡æµ®ç¾ï¼ˆopacity 0â†’1, 2.2s éæ¸¡ï¼‰åŒæ­¥å•Ÿå‹•ã€‚
  - è·¯å¾‘ï¼š`src/styles/splash.css`, `src/components/Hero/WelcomeOverlay.astro`
  - é©—æ”¶ï¼šç„¡ç©ºç™½é–“éš™ï¼ˆè¼‰å…¥æ¶ˆå¤±ä½†æ­¡è¿æœªå‡ºç¾ï¼‰ã€‚

- [ ] T017 [US1] é©—è­‰æ­¡è¿æ¨¡å¼å¯è¦‹æ€§çŸ©é™£ï¼šç¢ºèªåœ¨ Welcome æ¨¡å¼ä¸‹ï¼š
  - âœ… HeroBackground å¯è¦‹
  - âœ… WelcomeOverlay (ä»Šæ—¥ç´…å¡) å¯è¦‹
  - âŒ HeroDock éš±è—
  - âŒ CalendarBoard éš±è—
  - âŒ å³ä¸Šå·¥å…·æŒ‰éˆ•éš±è—
  - è·¯å¾‘ï¼š`src/styles/global.css`ï¼ˆbody.initial-welcome é¸æ“‡å™¨ï¼‰
  - é©—æ”¶ï¼šæˆªåœ–å°æ¯”ï¼Œåƒ…èƒŒæ™¯ + ç´…å¡å¯è¦‹ã€‚

### US1 â€” é–’ç½®è‡ªå‹•è½‰å ´

- [ ] T018 [US1] é©—è­‰é–’ç½®åµæ¸¬è¨­å®šï¼šç¢ºèª `IdleManager` åœ¨æ­¡è¿æ¨¡å¼ä¸‹çš„è¨ˆæ™‚å™¨ç‚º 6 ç§’ï¼Œä¸”**ä¸è¿½è¹¤ mousemove**ï¼ˆåƒ…è¿½è¹¤ mousedown, touchstart, keypressï¼‰ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/idleManager.ts`
  - é©—æ”¶ï¼šæ­¡è¿æ¨¡å¼ä¸‹ï¼Œåƒ…ç§»å‹•æ»‘é¼ ä¸é‡ç½®è¨ˆæ™‚å™¨ï¼›6 ç§’å¾Œå¡ç‰‡æ·¡å‡ºã€‚

- [ ] T019 [US1] é©—è­‰æ­¡è¿â†’æ²‰æµ¸è‡ªå‹•è½‰å ´ï¼šé–’ç½® 6 ç§’å¾Œï¼Œç¢ºèª `transition-mode: { to: 'zen' }` è¢«è§¸ç™¼ï¼Œæ­¡è¿å¡ç‰‡æ·¡å‡ºï¼Œé€²å…¥ç´”èƒŒæ™¯æ²‰æµ¸æ¨¡å¼ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/idleManager.ts`, `src/scripts/hero/handlers/modeHandler.ts`
  - é©—æ”¶ï¼šæ­¡è¿å¡ç‰‡æ¶ˆå¤±ï¼ŒDock/Header ä¸é¡¯ç¤ºï¼Œåƒ…èƒŒæ™¯ã€‚

**æª¢æŸ¥é»**ï¼šUS1 å®Œæ•´çš„å„€å¼å•Ÿå‹•æµç¨‹ï¼ˆåŠ è¼‰â†’æ­¡è¿â†’é–’ç½®è‡ªå‹•è½‰å ´ï¼‰å¯ç¨ç«‹é©—è­‰ä¸¦ç©©å®šé‹ä½œã€‚

---

## éšæ®µ 3ï¼šUser Story 2 â€” æ—¥æ›†æŸ¥è©¢èˆ‡è¾²æ›†è³‡è¨Š (Priority: P1) ğŸ¯

**ç›®æ¨™**ï¼šé©—è­‰æ—¥æ›†ç¶²æ ¼æ¸²æŸ“ã€è¾²æ›†è¨ˆç®—ç²¾ç¢ºåº¦ã€å¹´æœˆé¸æ“‡å™¨èˆ‡æ—¥æœŸäº’å‹•çš„å®Œæ•´åŠŸèƒ½éˆã€‚

**ç¨ç«‹æ¸¬è©¦**ï¼šé€²å…¥æ—¥æ›†æ¨¡å¼ï¼Œåˆ‡æ›è‡³å·²çŸ¥ç¯€æ°£/ç¯€æ…¶æ—¥æœŸï¼Œé©—è­‰é¡¯ç¤ºæ­£ç¢ºæ€§ï¼›æ“ä½œå¹´æœˆé¸æ“‡å™¨è·¨å¹´åˆ‡æ›ã€‚

### US2 â€” æ—¥æ›†ç¶²æ ¼æ¸²æŸ“

- [ ] T020 [US2] é©—è­‰æ—¥æ›†ç¶²æ ¼çµæ§‹ï¼š5Ã—7 æˆ– 6Ã—7 æ ¼å±€ï¼Œé€±é¦–æ¼¢å­—æ¨™è¨»ï¼ˆæ—¥ä¸€äºŒä¸‰å››äº”å…­ï¼‰ï¼Œå‰å¾Œæœˆç°è‰²å¡«å……æ­£ç¢ºã€‚
  - è·¯å¾‘ï¼š`src/scripts/calendar/calendarRenderer.ts`, `src/scripts/calendar/calendarCellBuilder.ts`
  - é©—æ”¶ï¼š2026-02 é¡¯ç¤º 35 æˆ– 42 æ ¼ï¼Œå‰æœˆç°è‰²æ—¥æœŸå¯è¦‹ã€‚

- [ ] T021 [US2] é©—è­‰æ—¥æœŸæ ¼å…§å®¹ä½ˆå±€ï¼šè¥¿æ›†å¤§æ•¸å­—ï¼ˆå·¦ä¸Š, Playfair Displayï¼‰+ è¾²æ›†æ—¥æœŸ/ç¯€æ°£ï¼ˆå³ä¸‹, Noto Serif TCï¼‰ã€‚
  - è·¯å¾‘ï¼š`src/scripts/calendar/calendarCellBuilder.ts`, `src/styles/calendar/`
  - é©—æ”¶ï¼šDevTools ç¢ºèªå­—é«” family èˆ‡å®šä½ã€‚

- [ ] T022 [US2] é©—è­‰ç¯€æ…¶/ç¯€æ°£è‰²å½©å„ªå…ˆç´šï¼šæ”¿åºœå‡æ—¥ (#ff6b6b) > å‚³çµ±ç¯€æ…¶ (ç´…è‰²ç²—é«”) > äºŒåå››ç¯€æ°£ (é‡‘è‰²ç²—é«”) > è¾²æ›†æ—¥æœŸ (ç°è‰²ä½é€æ˜åº¦)ã€‚
  - è·¯å¾‘ï¼š`src/scripts/calendar/calendarCellBuilder.ts`
  - é©—æ”¶ï¼šå·²çŸ¥ç¯€æ°£æ—¥ï¼ˆå¦‚ 2026-02-04 ç«‹æ˜¥ï¼‰é¡¯ç¤ºé‡‘è‰²ï¼›æ˜¥ç¯€æ—¥æœŸé¡¯ç¤ºç´…è‰²ã€‚

- [ ] T023 [US2] é©—è­‰æ—¥æ›†æ»‘å‹•å‹•ç•«ï¼šå‘å·¦æ»‘å‹• â‰¥50px è§¸ç™¼ `navigate-month(+1)`ï¼Œç¶²æ ¼ `animate-slide-left` â†’ `animationend` å¾Œç§»é™¤ã€‚å‘å³åŒç† (-1, `animate-slide-right`)ã€‚
  - è·¯å¾‘ï¼š`src/scripts/calendar/calendarEventHandlers.ts`, `src/styles/calendar/`
  - é©—æ”¶ï¼šæ»‘å‹•åˆ‡æœˆå‹•ç•«æµæš¢ç„¡æ®˜ç•™ classã€‚

- [ ] T024 [P] [US2] é©—è­‰è·¨æœˆæ—¥æœŸæ ¼è·³è½‰ï¼šé»é¸ç°è‰²å‰æœˆ/å¾Œæœˆæ—¥æœŸæ ¼ï¼Œè§¸ç™¼ `date-selected` ä¸¦è‡ªå‹•åˆ‡æ›è‡³å°æ‡‰æœˆä»½é‡ç¹ªã€‚
  - è·¯å¾‘ï¼š`src/scripts/calendar/calendarEventHandlers.ts`, `src/scripts/app/eventOrchestrator.ts`
  - é©—æ”¶ï¼šé»é¸ 2 æœˆç¶²æ ¼ä¸­çš„ 1 æœˆ 31 æ—¥ï¼Œè‡ªå‹•è·³è½‰è‡³ 1 æœˆã€‚

### US2 â€” è¾²æ›†è¨ˆç®—å¼•æ“

- [ ] T025 [US2] é©—è­‰è¾²æ›†è¨ˆç®—ç²¾ç¢ºåº¦ï¼šæŠ½æ¨£é©—è­‰å·²çŸ¥æ—¥æœŸçš„è¾²æ›†è½‰æ›çµæœã€‚
  - æ¸¬è©¦æ—¥æœŸï¼š2026-01-29ï¼ˆæ˜¥ç¯€, è¾²æ›†æ­£æœˆåˆä¸€ï¼‰ã€2026-02-04ï¼ˆç«‹æ˜¥ï¼‰ã€2026-06-14ï¼ˆç«¯åˆï¼‰
  - è·¯å¾‘ï¼š`src/scripts/core/lunar.ts`
  - é©—æ”¶ï¼š`Lunar.fromDate(date)` å›å‚³çš„å¹¹æ”¯å¹´ã€è¾²æ›†æœˆæ—¥ã€ç¯€æ°£ã€ç¯€æ…¶å…¨éƒ¨æ­£ç¢ºã€‚

- [ ] T026 [US2] é©—è­‰å»ºé™¤åäºŒç¥èˆ‡äºŒåå…«å®¿ï¼šç¢ºèª `getComprehensiveLuck()` çµåˆå»ºé™¤ä¸»åˆ¤èˆ‡äºŒåå…«å®¿è¼”åˆ¤ã€‚
  - è·¯å¾‘ï¼š`src/scripts/core/lunar.ts`
  - é©—æ”¶ï¼šä»Šæ—¥é¢æ¿é¡¯ç¤ºå»ºé™¤å‰å‡¶ç­‰ç´šèˆ‡äºŒåå…«å®¿å®¿åï¼ˆå«ç¦½æ˜Ÿ tooltipï¼‰ã€‚

- [ ] T027 [P] [US2] é©—è­‰å®œå¿Œé …ç›®ç”Ÿæˆï¼šç¢ºèªä¾æ“šå»ºé™¤åäºŒå®¢ç”Ÿæˆæ¯æ—¥å®œå¿Œæ¸…å–®ã€‚
  - è·¯å¾‘ï¼š`src/scripts/core/lunar.ts`
  - é©—æ”¶ï¼šä»Šæ—¥é¢æ¿ã€Œå®œã€èˆ‡ã€Œå¿Œã€å€å¡Šæ­£ç¢ºé¡¯ç¤ºé …ç›®æ¨™ç±¤ (Tags)ã€‚

### US2 â€” å¹´æœˆé¸æ“‡å™¨é¢æ¿

- [ ] T028 [US2] é©—è­‰å¹´ä»½é¸æ“‡å™¨ä½ˆå±€ï¼š5 æ¬„ Ã— 2 åˆ—ï¼Œå…±é¡¯ç¤º 10 å¹´ï¼Œèšç„¦ç•¶å‰å¹´ä»½å‰å¾Œç¯„åœï¼Œç•¶å‰å¹´é«˜äº®ã€‚
  - è·¯å¾‘ï¼š`src/scripts/panels/` (panelRenderers)
  - é©—æ”¶ï¼š2026 å¹´é«˜äº®ï¼Œå‘¨åœ Â±5 å¹´å¯è¦‹ã€‚

- [ ] T029 [US2] é©—è­‰æœˆä»½é¸æ“‡å™¨ä½ˆå±€ï¼š4 æ¬„ Ã— 3 åˆ—ï¼Œå…± 12 å€‹æœˆï¼Œç•¶å‰æœˆé«˜äº®ã€‚
  - è·¯å¾‘ï¼š`src/scripts/panels/` (panelRenderers)
  - é©—æ”¶ï¼š2 æœˆé«˜äº®ï¼Œ12 å€‹æœˆå…¨éƒ¨å¯è¦‹ã€‚

- [ ] T030 [US2] é©—è­‰é¸æ“‡å¾Œå»¶é²é—œé–‰é¢æ¿ï¼šé¸ä¸­æœˆä»½å¾Œï¼Œé¢æ¿å»¶é² 200ms é—œé–‰ï¼Œæä¾›ã€Œç¢ºèªé¸ä¸­ã€è¦–è¦ºåœç•™ã€‚
  - è·¯å¾‘ï¼š`src/scripts/panels/` (panelEventHandlers)
  - é©—æ”¶ï¼šé¸ä¸­å¾Œå¯è¦‹çŸ­æš«é«˜äº®ï¼Œ200ms å¾Œé¢æ¿æ»‘å‡ºã€‚

- [ ] T031 [US2] é©—è­‰é¢æ¿äº’æ–¥é‚è¼¯ï¼štoggle åŒé¢æ¿ç‚ºé—œé–‰ï¼›toggle ä¸åŒé¢æ¿ç‚ºåˆ‡æ›ï¼›`body[data-active-panel]` åŒæ­¥æ›´æ–°ï¼›èƒŒæ™¯é®ç½© (`#panelBackOverlay`) éš¨é¢æ¿é–‹é—œåŒæ­¥ã€‚
  - è·¯å¾‘ï¼š`src/scripts/app/stateManager.ts`, `src/scripts/panels/`
  - é©—æ”¶ï¼šå¿«é€Ÿé€£çºŒé»æ“Šå¹´æœˆâ†’ä»Šæ—¥â†’å¹´æœˆï¼Œé¢æ¿åˆ‡æ›ç„¡æ®˜ç•™æˆ–é–ƒçˆã€‚

### US2 â€” æ—¥æ›†æ¨¡å¼å¯è¦‹æ€§èˆ‡ Dock

- [ ] T032 [US2] é©—è­‰æ—¥æ›†æ¨¡å¼ Dock ç‹€æ…‹ï¼š
  - `.group-calendar` å¯è¦‹ï¼ˆå¹´æœˆæŒ‰éˆ•é¡¯ç¤ºï¼‰
  - `.group-image` éš±è—
  - æ­¥é€²éµ `< >` åŠŸèƒ½ç‚º `navigate-month(-1/+1)`ï¼Œè‰²ç³»ç‚ºé¦™æª³é‡‘ `#D4AF37`
  - `btnDay` (æ—¥æ›†æŒ‰éˆ•) ç‚º `active` é«˜äº®ç‹€æ…‹
  - è·¯å¾‘ï¼š`src/scripts/hero/handlers/modeHandler.ts`, `src/styles/hero/`
  - é©—æ”¶ï¼šDevTools ç¢ºèª class ç‹€æ…‹èˆ‡è‰²å½©è®Šæ•¸ã€‚

- [ ] T033 [US2] é©—è­‰æ—¥æ›†â†’ä»Šæ—¥é¢æ¿â†’è¿”å›æµç¨‹ï¼šé»é¸æ—¥æœŸ â†’ `date-selected` â†’ ä»Šæ—¥é¢æ¿å½ˆå‡º â†’ æ—¥æ›†ç¶²æ ¼éš±è— â†’ é—œé–‰é¢æ¿ â†’ æ—¥æ›†ç¶²æ ¼æ¢å¾©ã€‚
  - è·¯å¾‘ï¼š`src/scripts/app/eventOrchestrator.ts`, `src/scripts/panels/`
  - é©—æ”¶ï¼šå®Œæ•´æµè½‰ç„¡æ®˜ç•™ç‹€æ…‹ã€‚

- [ ] T034 [US2] é©—è­‰æ—¥æ›†æ¨™é¡ŒåŒæ­¥æ›´æ–°ï¼šåˆ‡æ›æœˆä»½å¾Œï¼Œ`update-calendar-title` äº‹ä»¶è§¸ç™¼ï¼Œé ‚éƒ¨é¡¯ç¤ºã€Œè¾²æ›† [æœˆå]ã€+ã€ŒYYYY . MMã€ã€‚ç‰¹æ®Šæœˆä»½æ˜ å°„ï¼šæ­£â†’ä¸€æœˆã€å†¬â†’åä¸€æœˆã€è‡˜â†’åäºŒæœˆã€‚
  - è·¯å¾‘ï¼š`src/scripts/calendar/calendarRenderer.ts`
  - é©—æ”¶ï¼šåˆ‡æ›è‡³è¾²æ›†åä¸€æœˆï¼Œæ¨™é¡Œé¡¯ç¤ºã€Œè¾²æ›† å†¬æœˆã€ã€‚

**æª¢æŸ¥é»**ï¼šUS2 æ—¥æ›†åŠŸèƒ½å®Œæ•´é©—æ”¶â€”â€”ç¶²æ ¼æ¸²æŸ“ã€è¾²æ›†è¨ˆç®—ã€å¹´æœˆé¸æ“‡å™¨ã€é¢æ¿äº’å‹•å…¨éƒ¨æ­£å¸¸ã€‚

---

## éšæ®µ 3.5ï¼šUser Story 8 â€” ç­†è¨˜ç´€éŒ„èˆ‡éˆæ„Ÿæ•æ‰ (Priority: P2) ğŸ–‹ï¸

**ç›®æ¨™**ï¼šå¯¦ä½œç­†è¨˜ CRUDã€æŒä¹…åŒ–ã€å¤šç­†è¨˜åˆ—è¡¨èˆ‡åŒ¯å‡ºåŠŸèƒ½ã€‚

- [ ] T035 [US8] å¯¦ä½œç­†è¨˜è³‡æ–™çµæ§‹èˆ‡ IndexedDB å­˜å–ï¼šå®Œæˆ `noteStorage.ts` èˆ‡ `noteController.ts`ã€‚
- [ ] T036 [US8] å¯¦ä½œç­†è¨˜ç·¨è¼¯æ¨¡å¼è½‰å‘ï¼šé»æ“Šé‹¼ç­†åœ–ç¤ºè§¸ç™¼ `transition-mode: note`ï¼Œåˆ‡æ›ä»Šæ—¥é¢æ¿ UI ç‚ºç·¨è¼¯å™¨ã€‚
- [ ] T037 [US8] å¯¦ä½œè‡ªå‹•å„²å­˜æ©Ÿåˆ¶ï¼šç›£è½ç·¨è¼¯å™¨ `input` äº‹ä»¶ï¼Œæ­é… 2s debounce è‡ªå‹•å­˜å…¥è³‡æ–™åº«ã€‚
- [ ] T038 [US8] å¯¦ä½œå–®æ—¥å¤šå‰‡ç­†è¨˜åˆ—è¡¨ï¼šæ”¯æ´åœ¨é¢æ¿ä¸­åˆ‡æ›æŸ¥çœ‹ä¸åŒå‰‡ç­†è¨˜ï¼Œä¸¦æä¾›ã€Œï¼‹ã€æŒ‰éˆ•æ–°å¢ã€‚
- [ ] T039 [US8] å¯¦ä½œåŒ¯å‡ºåŠŸèƒ½ï¼šç”Ÿæˆ `.json` æ•´æœˆå‚™ä»½æª”æ¡ˆä¸‹è¼‰ã€‚

---

## éšæ®µ 3.6ï¼šUser Story 9 â€” ç”Ÿæ´»éš¨ç­†åˆ†äº«æ¸²æŸ“ (Priority: P2) ğŸ“±

**ç›®æ¨™**ï¼šç”¢å‡ºå…·å‚™è¾²æ›†è³‡è¨Šèˆ‡ç­†è¨˜æ‘˜è¦çš„åˆ†äº«å…§å®¹ã€‚

- [ ] T095 [US9] å¯¦ä½œåˆ†äº«å…§å®¹ç”Ÿæˆå™¨ï¼šæ•´åˆç•¶å‰è¾²æ›†ã€æ—¥æœŸèˆ‡ç­†è¨˜å…§å®¹ï¼Œç”¢ç”Ÿå­—ä¸²æˆ–åœ–åƒæ•¸æ“šã€‚
- [ ] T096 [US9] æ•´åˆ Web Share APIï¼šé»æ“Šåˆ†äº«æŒ‰éˆ•åœ¨è¡Œå‹•ç«¯å–šèµ·ç³»çµ±åˆ†äº«æ¸…å–®ã€‚
- [ ] T097 [US9] å¯¦ä½œ Fallback åˆ†äº«ï¼ˆæ¡Œé¢ç«¯ï¼‰ï¼šè‹¥ Web Share ä¸é©ç”¨ï¼Œæ”¹ç‚ºè¤‡è£½åˆ†äº«æ–‡å­—è‡³å‰ªè²¼ç°¿ä¸¦é¡¯ç¤º Toastã€‚

---

## éšæ®µ 4ï¼šUser Story 3 â€” æ˜ ç•«äº’å‹•èˆ‡èƒŒæ™¯è³æ (Priority: P1) ğŸ¯

**ç›®æ¨™**ï¼šé©—è­‰æ˜ ç•«/Zen é›™æ¨¡å¼çš„ç‹€æ…‹è½‰æ›ã€Dock è‰²ç³»åŒæ­¥ã€è—å»Šç®¡ç†ã€è¼ªæ’­è¨ˆæ™‚èˆ‡å…¨è¢å¹•æ•´åˆã€‚

**ç¨ç«‹æ¸¬è©¦**ï¼šå¾æ—¥æ›†åˆ‡æ›è‡³æ˜ ç•«æ¨¡å¼ï¼Œæ“ä½œæ‰€æœ‰ Dock æŒ‰éˆ•ã€åˆ‡æ›è—å»Šæ¨¡å¼ã€é€²å…¥/é€€å‡º Zenã€æ¸¬è©¦æ‰‹å‹¢å¼•å°ã€‚

### US3 â€” æ¨¡å¼è½‰æ›èˆ‡ Dock è‰²ç³»åŒæ­¥

- [ ] T040 [US3] é©—è­‰ Calendar â†’ Artwork è½‰æ›ï¼šé»æ“Šã€Œæ˜ ç•«ã€æŒ‰éˆ•è§¸ç™¼ `transition-mode: { to: 'artwork' }`ã€‚
  - body è®Šæ›´ï¼šadd `immersion-mode` + `mode-artwork`
  - Dock è‰²ç³»ï¼šå¾é¦™æª³é‡‘è½‰ç‚ºæ¥µåœ°ç´”éŠ€
  - ä¸­é–“æ§½ä½ï¼š`.group-calendar` â†’ hidden, `.group-image` â†’ flex
  - `btnChangeImage` é€²å…¥ `active` é«˜äº®
  - CalendarBoard â†’ éš±è—
  - è·¯å¾‘ï¼š`src/scripts/hero/handlers/modeHandler.ts`
  - é©—æ”¶ï¼šæ‰€æœ‰å…ƒä»¶å¯è¦‹æ€§ç¬¦åˆ plan.md å…ƒä»¶å¯è¦‹æ€§çŸ©é™£ Artwork åˆ—ã€‚

- [ ] T041 [US3] é©—è­‰ Artwork â†’ Calendar è½‰æ›ï¼šé»æ“Šã€Œæ—¥æ›†ã€æŒ‰éˆ•è§¸ç™¼ `transition-mode: { to: 'calendar' }`ã€‚
  - body è®Šæ›´ï¼šremove `immersion-mode`, `mode-artwork`
  - Dock è‰²ç³»ï¼šå¾æ¥µåœ°ç´”éŠ€è½‰å›é¦™æª³é‡‘
  - ä¸­é–“æ§½ä½ï¼š`.group-image` â†’ hidden, `.group-calendar` â†’ flex
  - `btnDay` é€²å…¥ `active` é«˜äº®
  - CalendarBoard â†’ é¡¯ç¤º
  - è·¯å¾‘ï¼š`src/scripts/hero/handlers/modeHandler.ts`
  - é©—æ”¶ï¼šè‰²ç³»å³æ™‚åŒæ­¥ï¼Œç„¡å»¶é²æˆ–é–ƒçˆã€‚

- [ ] T042 [US3] é©—è­‰è‰²ç³»å…¨åŸŸåŒæ­¥ç¯„åœï¼šæ¨¡å¼åˆ‡æ›æ™‚ï¼Œä»¥ä¸‹å…ƒä»¶è‰²ç³»å¿…é ˆã€ŒåŒç§’ã€åŒæ­¥ã€æ›´æ–°ï¼š
  - Dock æ¡†ç·š (border)
  - æ­¥é€²éµ `< >` (ç®­é ­é¡è‰²)
  - åˆ†éš”ç·š (divider gradient)
  - é«˜äº®æŒ‰éˆ• (active button bg/text)
  - éŸ³æ¨‚å¾‹å‹•æ³¢ç´‹ (music pulse)
  - è·¯å¾‘ï¼š`src/styles/hero/`, CSS è®Šæ•¸
  - é©—æ”¶ï¼šæ…¢å‹•ä½œæ’­æ”¾è½‰å ´ï¼Œç¢ºèªæ²’æœ‰å€‹åˆ¥å…ƒä»¶å»¶é²æ›´æ–°ã€‚

- [ ] T043 [P] [US3] é©—è­‰æ­¥é€²éµ `< >` åŠŸèƒ½è½‰ç¾©ï¼š
  - æ—¥æ›†æ¨¡å¼ï¼š`navigate-month(-1/+1)`
  - æ˜ ç•«æ¨¡å¼ï¼š`request-hero-change` (prev/next image)
  - Zen æ¨¡å¼ï¼šDock éš±è—ï¼Œæ»‘å‹•æ‰‹å‹¢æ›¿ä»£
  - è·¯å¾‘ï¼š`src/scripts/hero/handlers/navigationHandler.ts`
  - é©—æ”¶ï¼šåœ¨æ˜ ç•«æ¨¡å¼æŒ‰ `<` ç¢ºèªæ˜¯åˆ‡æ›åœ–ç‰‡è€Œéåˆ‡æœˆã€‚

### US3 â€” è—å»Šç®¡ç†ç³»çµ±

- [ ] T044 [US3] é©—è­‰è—å»Šæ¨¡å¼åˆ‡æ›ï¼ˆDefault / Custom / Hybridï¼‰ï¼š
  - Defaultï¼šåƒ…å­£ç¯€åœ–ç‰‡ï¼ˆä¾æ“šç•¶å‰æœˆä»½åŠ è¼‰ spring/summer/autumn/winter è³‡æ–™å¤¾ï¼‰
  - Customï¼šåƒ…è‡ªé¸åœ–ç‰‡ï¼ˆä¾†è‡ª IndexedDB blobï¼‰
  - Hybridï¼šå­£ç¯€ + è‡ªé¸æ··åˆï¼Œéš¨æ©Ÿæ´—ç‰Œ
  - è·¯å¾‘ï¼š`src/scripts/hero/imageManager.ts`, `src/scripts/hero/galleryManager.ts`
  - é©—æ”¶ï¼šåˆ‡æ›æ¯ç¨®æ¨¡å¼ï¼ŒNetwork é¢æ¿ç¢ºèªåœ–ç‰‡ä¾†æºæ­£ç¢ºã€‚

- [ ] T045 [US3] é©—è­‰ Custom ç©ºç‹€æ…‹è™•ç†ï¼šè‡ªé¸åœ–ç‰‡ç‚ºç©ºæ™‚ï¼š
  - èƒŒæ™¯å¼·åˆ¶é¡¯ç¤º Fallback åœ–ç‰‡ (`assets/gallery/default/1.png`)
  - é¡¯ç¤ºç´…è‰²è­¦å‘Šæ¡† `.gallery-empty-notice`ï¼šã€Œâš ï¸ å°šç„¡è‡ªé¸åœ–ç‰‡ï¼Œè«‹å…ˆåŒ¯å…¥ã€
  - è‡ªå‹•é–‹å•Ÿåœ–ç‰‡ç®¡ç†é¸å–®å¼•å°åŒ¯å…¥
  - `custom-list-empty` äº‹ä»¶è§¸ç™¼
  - è·¯å¾‘ï¼š`src/scripts/hero/imageManager.ts`, `src/scripts/hero/galleryManager.ts`
  - é©—æ”¶ï¼šæ¸…ç©º IndexedDB å¾Œåˆ‡æ›è‡³ Customï¼Œç¢ºèªä¸‰é …è¡Œç‚ºå…¨éƒ¨æ­£ç¢ºã€‚

- [ ] T046 [P] [US3] é©—è­‰ç¯€æ…¶ç‰¹æ®Šåœ–ç‰‡åˆ‡æ›ï¼šç•¶æ—¥æœŸä½æ–¼å·²çŸ¥ç¯€æ…¶/ç¯€æ°£æ™‚ï¼Œåœ–ç‰‡ç®¡ç†å™¨æœå°‹å°æ‡‰åç¨±çš„åœ–ç‰‡ï¼ˆå¦‚ `DragonBoat.png`, `DragonBoat1.png` è‡³ `DragonBoat5.png`ï¼‰ã€‚æ‰¾åˆ°å¾Œåˆ‡æ›è‡³ç¯€æ…¶åœ–ç‰‡åˆ—è¡¨ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/imageManager.ts`, `src/scripts/hero/imageRules.ts`
  - é©—æ”¶ï¼šæ‰‹å‹•è¨­å®šæ—¥æœŸç‚ºç«¯åˆç¯€ï¼Œç¢ºèªèƒŒæ™¯åˆ‡æ›ç‚ºç«¯åˆåœ–ç‰‡ã€‚

- [ ] T047 [P] [US3] é©—è­‰åœ–ç‰‡éš¨æ©Ÿæ´—ç‰Œï¼š`imageRules.ts` ä¸­ `ENABLE_RANDOM_SHUFFLE = true`ï¼Œå­£ç¯€åœ–ç‰‡è¼‰å…¥å¾Œç¶“éæ´—ç‰Œå†æ’­æ”¾ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/imageRules.ts`, `src/scripts/hero/imageManager.ts`
  - é©—æ”¶ï¼šå¤šæ¬¡é‡æ•´é¦–é ï¼Œé¦–å¼µèƒŒæ™¯åœ–ä¸åŒã€‚

### US3 â€” è¼ªæ’­è¨ˆæ™‚èˆ‡é–’ç½®ç®¡ç†

- [ ] T048 [US3] é©—è­‰è¼ªæ’­è¨ˆæ™‚å™¨ï¼š`SlideshowManager` é è¨­é–“éš” 10,000msï¼Œæ˜ ç•«æ¨¡å¼å•Ÿå‹•æ™‚ `slideshow-control: { action: 'start', isArtwork: true }`ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/slideshowManager.ts`
  - é©—æ”¶ï¼šæ‰“é–‹ DevTools consoleï¼Œç¢ºèªæ¯ 10 ç§’è§¸ç™¼ä¸€æ¬¡ `switchCallback`ã€‚

- [ ] T049 [US3] é©—è­‰æ˜ ç•«é–’ç½®è‡ªå‹•æ›åœ–ï¼š`IdleManager` åœ¨æ˜ ç•«æ¨¡å¼ä¸‹æ¯ 5 ç§’è§¸ç™¼ `artwork-idle-slide`ï¼Œ`NavigationHandler` æ”¶åˆ°å¾Œåˆ‡æ›ä¸‹ä¸€å¼µã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/idleManager.ts`, `src/scripts/hero/handlers/navigationHandler.ts`
  - é©—æ”¶ï¼šé€²å…¥æ˜ ç•«æ¨¡å¼å¾Œä¸æ“ä½œï¼Œ5 ç§’å¾Œåœ–ç‰‡è‡ªå‹•åˆ‡æ›ã€‚

- [ ] T050 [US3] é©—è­‰ IdleManager 200ms é˜²æŠ–ï¼šæ¨¡å¼è½‰æ›æœŸé–“ï¼ˆå¦‚ Calendar â†’ Artworkï¼‰ï¼Œç¢ºèª 200ms debounce é˜²æ­¢é–’ç½®è¨ˆæ™‚å™¨é–ƒçˆå•Ÿå‹•ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/idleManager.ts`
  - é©—æ”¶ï¼šå¿«é€Ÿé€£çºŒåˆ‡æ›æ¨¡å¼ï¼Œä¸è§¸ç™¼æ„å¤–çš„é–’ç½®å›èª¿ã€‚

### US3 â€” æ²‰æµ¸æ¨¡å¼ (Zen) èˆ‡å…¨è¢å¹•æ•´åˆ

- [ ] T051 [US3] é©—è­‰ Artwork â†’ Zen è½‰æ›ï¼ˆå…¨è¢å¹•é€²å…¥ï¼‰ï¼š
  - é»æ“ŠèƒŒæ™¯è§¸ç™¼ `transition-mode: { to: 'zen' }`
  - ç³»çµ±å‘¼å« `document.documentElement.requestFullscreen()`
  - body classï¼š`immersion-mode`ï¼ˆç„¡ `mode-artwork`ï¼‰
  - Dock / Header / å³ä¸ŠæŒ‰éˆ• / æ—¥æ›† å…¨éƒ¨éš±è—
  - è·¯å¾‘ï¼š`src/scripts/hero/handlers/modeHandler.ts`
  - é©—æ”¶ï¼šç¢ºèªç€è¦½å™¨é€²å…¥å…¨è¢å¹•ï¼ŒUI å®Œå…¨æ¶ˆå¤±ã€‚

- [ ] T052 [US3] é©—è­‰ Zen â†’ Artwork è½‰æ›ï¼ˆå…¨è¢å¹•é€€å‡ºï¼‰ï¼š
  - é»æ“Šç•«é¢æˆ–æŒ‰ Esc è§¸ç™¼ `transition-mode: { to: 'artwork' }`
  - ç³»çµ±å‘¼å« `document.exitFullscreen()`
  - Dock / Header / å³ä¸ŠæŒ‰éˆ•é‡æ–°é¡¯ç¤ºï¼ˆéŠ€è‰²ç³»ï¼‰
  - è·¯å¾‘ï¼š`src/scripts/hero/handlers/modeHandler.ts`
  - é©—æ”¶ï¼šé€€å‡ºå…¨è¢å¹•ï¼ŒDock æ¢å¾©éŠ€è‰²ç³»ã€‚

- [ ] T053 [US3] é©—è­‰ fullscreenchange åŒæ­¥æ©Ÿåˆ¶ï¼šä½¿ç”¨è€…é€éç³»çµ±è¡Œç‚ºï¼ˆå¦‚æ‰‹æ©Ÿè¿”å›éµã€æ¡Œé¢ Alt+F4 ç›¸é„°å…¨è¢å¹•çª—å£ï¼‰é€€å‡ºå…¨è¢å¹•æ™‚ï¼Œç›£è½ `fullscreenchange` äº‹ä»¶ï¼Œè‡ªå‹•å°‡æ¨¡å¼å¾ Zen å¼·åˆ¶æ¢å¾©ç‚º Artworkã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/handlers/modeHandler.ts`
  - é©—æ”¶ï¼šåœ¨ Zen æ¨¡å¼æŒ‰ Esc é€€å‡ºå…¨è¢å¹•ï¼Œç³»çµ±è‡ªå‹•å›åˆ° Artworkï¼ˆDock é‡æ–°é¡¯ç¤ºï¼‰ã€‚

- [ ] T054 [US3] é©—è­‰ Zen æ»‘å‹•æ‰‹å‹¢åˆ‡æ›èƒŒæ™¯ï¼šåœ¨ Zen æ¨¡å¼ï¼ˆUI å…¨éš±è—ï¼‰ä¸‹ï¼Œå·¦å³æ»‘å‹• â‰¥50px å¯åˆ‡æ›èƒŒæ™¯åœ–ç‰‡ã€‚`NavigationHandler` æ¥å— `immersion-mode` ä½œç‚ºæœ‰æ•ˆç‹€æ…‹ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/touchHandler.ts`, `src/scripts/hero/handlers/navigationHandler.ts`
  - é©—æ”¶ï¼šå…¨è¢å¹• Zen æ¨¡å¼ä¸­å·¦å³æ»‘å‹•ï¼ŒèƒŒæ™¯åœ–ç‰‡è®Šæ›´ã€‚

- [ ] T055 [US3] é©—è­‰é¦–æ¬¡æ‰‹å‹¢å¼•å°ï¼šä½¿ç”¨è€…**é¦–æ¬¡**é€²å…¥ Zen æ¨¡å¼æ™‚ï¼Œé¡¯ç¤ºåŠé€æ˜æ‰‹æŒ‡æ»‘å‹•å‹•ç•« +ã€Œå·¦å³æ»‘å‹•åˆ‡æ›èƒŒæ™¯ã€æ–‡å­—æç¤ºï¼Œ4.5 ç§’å¾Œæ·¡å‡ºï¼Œ`localStorage('hasShownZenHint')` è¨­ç‚º true å¾Œä¸å†é¡¯ç¤ºã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/handlers/modeHandler.ts`ï¼ˆæˆ–å°ˆç”¨ hint æ¨¡çµ„ï¼‰
  - é©—æ”¶ï¼šé¦–æ¬¡é€²å…¥é¡¯ç¤ºå¼•å°ï¼›æ¸…é™¤ localStorage å¾Œé‡é€²å†æ¬¡é¡¯ç¤ºï¼›ç¬¬äºŒæ¬¡é€²å…¥ä¸é¡¯ç¤ºã€‚

### US3 â€” èƒŒæ™¯åœ–ç‰‡è½‰å ´å“è³ª

- [ ] T056 [US3] é©—è­‰èƒŒæ™¯åˆ‡æ›å‹•ç•«å“è³ªï¼šåœ–ç‰‡åˆ‡æ›æ¡ç”¨ 1.6s `cubic-bezier(0.2, 0.8, 0.2, 1)` çš„å‹•æ…‹å¹³ç§» + æ·¡å…¥ï¼ˆçµ²ç¶¢èˆ¬éæ¸¡ï¼‰ã€‚
  - è·¯å¾‘ï¼š`src/styles/hero.css`ï¼ˆæˆ– hero/ å­ç›®éŒ„ï¼‰
  - é©—æ”¶ï¼šDevTools Performance é¢æ¿ç¢ºèªå‹•ç•«ç©©å®š 60fpsï¼Œç„¡æ‰å¹€ã€‚

- [ ] T057 [P] [US3] é©—è­‰ No Grain Policyï¼šç¢ºèªå…¨ç«™ç„¡ SVG `feTurbulence` å™ªé»ç´‹ç†æ®˜ç•™ï¼ˆç»ç’ƒå¡ç‰‡ã€æ—¥æ›†ã€é¢æ¿ã€è—å»Šé¸å–®ï¼‰ã€‚
  - è·¯å¾‘ï¼šå…¨åŸŸæœå°‹ `feTurbulence` æ–¼ `src/`
  - é©—æ”¶ï¼šæœå°‹çµæœç‚º 0ã€‚

- [ ] T058 [P] [US3] é©—è­‰åŸå§‹è‰²å½©é‚„åŸï¼šèƒŒæ™¯åœ–ç‰‡ç„¡ CSS `saturate` / `brightness` æ¿¾é¡ã€‚
  - è·¯å¾‘ï¼š`src/styles/hero.css`ï¼ˆhero-background ç›¸é—œï¼‰
  - é©—æ”¶ï¼šæœå°‹ hero-background çš„ filter å±¬æ€§ï¼Œç¢ºèªç„¡ saturate/brightnessã€‚

**æª¢æŸ¥é»**ï¼šUS3 æ˜ ç•«ç³»çµ±å®Œæ•´é©—æ”¶â€”â€”æ¨¡å¼è½‰æ›ã€é›™è‰²ç³»åŒæ­¥ã€è—å»Šç®¡ç†ã€Zen å…¨è¢å¹•ã€æ»‘å‹•æ‰‹å‹¢ã€è½‰å ´å“è³ªå…¨éƒ¨æ­£å¸¸ã€‚

---

## éšæ®µ 5ï¼šUser Story 4 â€” éŸ³æ¨‚æ’­æ”¾èˆ‡é›»å°ç®¡ç† (Priority: P2)

**ç›®æ¨™**ï¼šé©—è­‰éŸ³æ¨‚æ’­æ”¾ã€æ·¡å…¥æ·¡å‡ºã€è‡ªè¨‚é›»å° CRUDã€ç‹€æ…‹è¨˜æ†¶æ¢å¾©èˆ‡åˆ†é æ„ŸçŸ¥ã€‚

**ç¨ç«‹æ¸¬è©¦**ï¼šæ’­æ”¾é è¨­éŸ³æ¨‚ã€æ–°å¢/åˆªé™¤è‡ªè¨‚é›»å°ã€é—œé–‰é‡é–‹é é¢é©—è­‰æ¢å¾©ï¼Œåˆ‡æ›åˆ†é é©—è­‰æš«åœ/æ¢å¾©ã€‚

### US4 â€” éŸ³æ¨‚æ’­æ”¾æ ¸å¿ƒ

- [ ] T060 [US4] é©—è­‰éŸ³æ¨‚æ’­æ”¾æ·¡å…¥æ·¡å‡ºï¼šæ’­æ”¾é–‹å§‹æ™‚ â‰¥1000ms çš„ Logarithmic Fade-inï¼Œæš«åœæ™‚ â‰¥1000ms Fade-outã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/musicPlayer.ts`
  - é©—æ”¶ï¼šæ’­æ”¾/æš«åœæ“ä½œç„¡çªå…€éŸ³é‡è·³è®Šã€‚

- [ ] T061 [US4] é©—è­‰æ’­æ”¾ä¸­è¦–è¦ºå›é¥‹ï¼šéŸ³æ¨‚æ’­æ”¾æ™‚ï¼Œå°æ‡‰é›»å°é …ç›®å…·å‚™å‘¼å¸ç‡ˆæˆ–æ³¢ç´‹æ•ˆæœï¼Œæä¾›ã€Œé‹ä½œä¸­ã€è¦–è¦ºç´¢å¼•ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/musicPlayer.ts`, `src/styles/hero/`
  - é©—æ”¶ï¼šæ’­æ”¾ä¸­å¯è¦‹å¾®å¼±å‹•æ…‹æ³¢ç´‹ã€‚

- [ ] T062 [US4] é©—è­‰åˆ†é æ„ŸçŸ¥ï¼š`visibilitychange` ç‚º `hidden` æ™‚è‡ªå‹•æš«åœï¼Œåˆ‡å› `visible` æ™‚è‡ªå‹•æ¢å¾©æ’­æ”¾ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/musicPlayer.ts`
  - é©—æ”¶ï¼šåˆ‡æ›åˆ†é å¾ŒéŸ³æ¨‚æš«åœï¼Œå›ä¾†å¾Œæ¢å¾©ã€‚

- [ ] T063 [P] [US4] é©—è­‰æ›²ç›®è‡ªå‹•æ¥çºŒï¼šç•¶å‰æ›²ç›®æ’­æ”¾çµæŸ (`ended` äº‹ä»¶) å¾Œè‡ªå‹•æ’­æ”¾ä¸‹ä¸€é¦–ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/musicPlayer.ts`
  - é©—æ”¶ï¼šæ’­æ”¾ä¸€é¦–çŸ­æ›²ï¼ŒçµæŸå¾Œè‡ªå‹•åˆ‡æ›åˆ°ä¸‹ä¸€é¦–ã€‚

### US4 â€” é›»å°ç®¡ç†èˆ‡æŒä¹…åŒ–

- [ ] T064 [US4] é©—è­‰è‡ªè¨‚é›»å°æ–°å¢ï¼šä½¿ç”¨è€…è¼¸å…¥æœ‰æ•ˆ HTTPS ä¸²æµ URLï¼Œæ–°å¢è‡³ IndexedDBï¼Œåˆ·æ–°å¾Œä¿ç•™ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/musicPlayer.ts`ï¼ˆæˆ–å°ˆç”¨é›»å°ç®¡ç†æ¨¡çµ„ï¼‰
  - é©—æ”¶ï¼šæ–°å¢é›»å° â†’ é‡æ–°æ•´ç† â†’ é›»å°ä»å­˜åœ¨ã€‚

- [ ] T065 [US4] é©—è­‰é›»å°åˆªé™¤åŠŸèƒ½ï¼šæ”¯æ´åˆªé™¤é è¨­èˆ‡è‡ªè¨‚é›»å°ã€‚
  - è·¯å¾‘ï¼šåŒä¸Š
  - é©—æ”¶ï¼šåˆªé™¤é›»å° â†’ æ¶ˆå¤± â†’ é‡æ–°æ•´ç†â†’ ä»æ¶ˆå¤±ã€‚

- [ ] T066 [US4] é©—è­‰é˜²å‘†æ©Ÿåˆ¶ï¼šé»æ“Šæ—¢æœ‰é›»å°åƒ…åˆ‡æ›æ’­æ”¾ï¼ˆä¸é‡è¤‡æ–°å¢ï¼‰ï¼›è¼¸å…¥æ–° URL æ‰åŸ·è¡Œæ–°å¢å‹•ä½œã€‚
  - è·¯å¾‘ï¼šåŒä¸Š
  - é©—æ”¶ï¼šé»æ“Šå·²å­˜åœ¨çš„é›»å°ï¼Œæ¸…å–®ä¸å‡ºç¾é‡è¤‡é …ã€‚

- [ ] T067 [US4] é©—è­‰ç‹€æ…‹è¨˜æ†¶æ¢å¾©ï¼š`localStorage('zen_music_last_url')` è¨˜ä½ä¸Šæ¬¡é¸æ“‡ã€‚å•Ÿå‹•æ™‚ `MusicPlayer.init` è®€å–ä¸¦æº–å‚™å°±ç·’ï¼Œç™¼é€ `music-restored` äº‹ä»¶ï¼ŒUI é«˜äº®å°æ‡‰é …ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/musicPlayer.ts`
  - é©—æ”¶ï¼šæ’­æ”¾æŸé›»å° â†’ é‡æ–°æ•´ç† â†’ è©²é›»å°è‡ªå‹•è¢«é¸ä¸­ï¼ˆReady ç‹€æ…‹ï¼‰ã€‚

- [ ] T068 [P] [US4] é©—è­‰ HTTPS å¼·åˆ¶ï¼šè‡ªè¨‚ URL è¼¸å…¥æ™‚é©—è­‰å¿…é ˆç‚º `https://` é–‹é ­ï¼Œæ‹’çµ• `http://` æˆ–ç„¡æ•ˆæ ¼å¼ã€‚
  - è·¯å¾‘ï¼šåŒä¸Š
  - é©—æ”¶ï¼šè¼¸å…¥ `http://...` â†’ æ‹’çµ•ä¸¦æç¤ºã€‚

**æª¢æŸ¥é»**ï¼šUS4 éŸ³æ¨‚åŠŸèƒ½å®Œæ•´é©—æ”¶â€”â€”æ’­æ”¾å“è³ªã€é›»å° CRUDã€æŒä¹…åŒ–ã€å®‰å…¨æ€§å…¨éƒ¨æ­£å¸¸ã€‚

---

## éšæ®µ 6ï¼šUser Story 5 â€” å‹•æ…‹ä¸»é¡Œèˆ‡å­£ç¯€ç³»çµ± (Priority: P2)

**ç›®æ¨™**ï¼šé©—è­‰ä¸»é¡Œå¼•æ“æ ¹æ“šæœˆä»½/ç¯€æ…¶è‡ªå‹•åˆ‡æ›è‰²å½©ä¸»é¡Œï¼Œä¸”æ¨¡å¼â†”è‰²ç³»åŒæ­¥æ­£ç¢ºã€‚

**ç¨ç«‹æ¸¬è©¦**ï¼šæ‰‹å‹•åˆ‡æ›æœˆä»½è‡³ 4 å€‹å­£ç¯€èˆ‡æ˜¥ç¯€æ—¥æœŸï¼Œé©—è­‰ä¸»é¡Œè‰²æ˜¯å¦æ­£ç¢ºå¥—ç”¨ã€‚

- [ ] T070 [US5] é©—è­‰å­£ç¯€ä¸»é¡Œæ˜ å°„è¦å‰‡ï¼š
  - 2-4 æœˆ â†’ `theme-spring`
  - 5-7 æœˆ â†’ `theme-summer`
  - 8-10 æœˆ â†’ `theme-autumn`
  - 11-1 æœˆ â†’ `theme-winter`
  - è·¯å¾‘ï¼š`src/scripts/app/stateManager.ts`ï¼ˆ`getTheme` æ–¹æ³•ï¼‰
  - é©—æ”¶ï¼šåˆ‡æ›æœˆä»½è‡³ 3ã€6ã€9ã€12 æœˆï¼Œç¢ºèª `#appContainer` class æ­£ç¢ºã€‚

- [ ] T071 [US5] é©—è­‰ç¯€æ…¶ä¸»é¡Œè¦†å¯«ï¼šæ˜¥ç¯€æ—¥æœŸè¦†å¯«ç‚º `theme-festive`ï¼ˆç´…è‰²ä¸»å°ï¼‰ã€‚
  - è·¯å¾‘ï¼š`src/scripts/app/stateManager.ts`
  - é©—æ”¶ï¼šåˆ‡æ›è‡³ 2026-01-29ï¼ˆæ˜¥ç¯€ï¼‰ï¼Œä¸»é¡Œè®Šç‚º `theme-festive`ã€‚

- [ ] T072 [US5] é©—è­‰ä¸»é¡Œè½‰å ´å‹•ç•«ï¼šä¸»é¡Œåˆ‡æ›æ™‚èƒŒæ™¯è‰²ã€æ–‡å­—è‰²ã€é‚Šæ¡†è‰²ä»¥ 0.6s `cubic-bezier(0.22, 1, 0.36, 1)` ç·©å‹•éæ¸¡ã€‚
  - è·¯å¾‘ï¼š`src/styles/themes/`, `src/styles/global.css`
  - é©—æ”¶ï¼šåˆ‡æœˆæ™‚è§€å¯ŸèƒŒæ™¯è‰²è®ŠåŒ–ç‚ºå¹³æ»‘éæ¸¡ï¼Œéç¬é–“è·³è®Šã€‚

- [ ] T073 [US5] é©—è­‰æ—¥æ›†æ¨¡å¼é‡‘è‰²ç³»æ‡‰ç”¨ï¼šæ—¥æ›†æ¨¡å¼ä¸‹ Dock æ¡†ç·šã€åˆ†éš”ç·šã€æ­¥é€²éµã€é«˜äº®æŒ‰éˆ•å…¨éƒ¨ç‚ºé¦™æª³é‡‘ç³» (`#D4AF37`)ã€‚
  - è·¯å¾‘ï¼š`src/styles/hero/`
  - é©—æ”¶ï¼šDevTools computed styles ç¢ºèªè‰²å½©å€¼ã€‚

- [ ] T074 [P] [US5] é©—è­‰æ˜ ç•«æ¨¡å¼éŠ€è‰²ç³»æ‡‰ç”¨ï¼šæ˜ ç•«æ¨¡å¼ä¸‹å…¨éƒ¨ç‚ºæ¥µåœ°ç´”éŠ€ç³» (`#FFFFFF` å¼·èª¿)ã€‚
  - è·¯å¾‘ï¼š`src/styles/hero/`
  - é©—æ”¶ï¼šåŒä¸Šï¼Œåˆ‡æ›è‡³æ˜ ç•«æ¨¡å¼å¾Œç¢ºèªã€‚

**æª¢æŸ¥é»**ï¼šUS5 ä¸»é¡Œå¼•æ“å®Œæ•´é©—æ”¶â€”â€”å­£ç¯€æ˜ å°„ã€ç¯€æ…¶è¦†å¯«ã€è½‰å ´å‹•ç•«ã€é›™è‰²ç³»åŒæ­¥å…¨éƒ¨æ­£å¸¸ã€‚

---

## éšæ®µ 7ï¼šUser Story 6 â€” PWA å®‰è£èˆ‡é›¢ç·šèƒ½åŠ› (Priority: P3)

**ç›®æ¨™**ï¼šé©—è­‰ PWA manifestã€Service Worker æ›´æ–°æ©Ÿåˆ¶èˆ‡é›¢ç·šå¿«å–ã€‚

**ç¨ç«‹æ¸¬è©¦**ï¼šåœ¨ Chrome ä¸­è§¸ç™¼å®‰è£æç¤ºï¼Œæ–·ç¶²å¾Œé©—è­‰é é¢å¯ç”¨æ€§ã€‚

- [ ] T080 [US6] é©—è­‰ PWA å®‰è£æç¤ºæµç¨‹ï¼šç€è¦½å™¨è§¸ç™¼ `beforeinstallprompt`ï¼Œ`deferredPrompt` æ•ç²å¾Œé¡¯ç¤ºã€ŒåŠ åˆ°ä¸»ç•«é¢ã€æŒ‰éˆ•ã€‚
  - è·¯å¾‘ï¼š`src/scripts/hero/pwaHandler.ts`
  - é©—æ”¶ï¼šChrome Application é¢æ¿ç¢ºèª manifest åˆè¦ï¼Œå®‰è£æŒ‰éˆ•å¯è¦‹ã€‚

- [ ] T081 [US6] é©—è­‰ Service Worker æ›´æ–°åµæ¸¬ï¼š`registration.waiting` å­˜åœ¨æ™‚å¼·åˆ¶ `skipWaiting`ï¼Œ12 ç§’è¶…æ™‚å¾Œä»å…è¨±é€²å…¥ã€‚
  - è·¯å¾‘ï¼š`src/scripts/app/resourceLoader.ts`
  - é©—æ”¶ï¼šDevTools Application â†’ Service Workers ç¢ºèªæ›´æ–°æµç¨‹ã€‚

- [ ] T082 [P] [US6] é©—è­‰é›¢ç·šå¿«å–ï¼šæ–·ç¶²å¾Œå·²å®‰è£çš„ PWA å¯é–‹å•Ÿï¼Œå·²å¿«å–é é¢ã€åœ–ç‰‡ã€å­—é«”æ­£å¸¸é¡¯ç¤ºã€‚
  - è·¯å¾‘ï¼š`astro.config.mjs` (PWA è¨­å®š)
  - é©—æ”¶ï¼šæ–·ç¶²æ¨¡å¼ä¸‹é–‹å•Ÿ PWAï¼Œæ—¥æ›†èˆ‡èƒŒæ™¯åœ–å¯æ“ä½œã€‚

**æª¢æŸ¥é»**ï¼šUS6 PWA åŠŸèƒ½åŸºæœ¬é©—æ”¶ã€‚

---

## éšæ®µ 8ï¼šUser Story 7 â€” FAQ é¢æ¿èˆ‡çŸ¥è­˜å¼•å° (Priority: P3)

**ç›®æ¨™**ï¼šé©—è­‰ FAQ é¢æ¿çš„é–‹é—œè¡Œç‚ºã€æ‰‹é¢¨ç´å±•é–‹/æ”¶åˆèˆ‡é®ç½©é—œé–‰ã€‚

**ç¨ç«‹æ¸¬è©¦**ï¼šåœ¨æ˜ ç•«æ¨¡å¼é»æ“Š FAQ æŒ‰éˆ•ï¼Œæ“ä½œæ‰€æœ‰å•ç­”é …ç›®ã€‚

- [ ] T090 [US7] é©—è­‰ FAQ é¢æ¿é–‹é—œï¼šå³ä¸Šè§’ â“ æŒ‰éˆ•éåŒæ­¥åˆ‡æ›é¢æ¿é¡¯ç¤º/éš±è—ï¼›é¢æ¿ç‚ºç»ç’ƒè³ªæ„Ÿæµ®å‹•é¢æ¿ã€‚
  - è·¯å¾‘ï¼š`src/components/Hero/HeroSection.astro`ï¼ˆæˆ–å°ˆç”¨ FAQ çµ„ä»¶ï¼‰, `src/scripts/hero/`
  - é©—æ”¶ï¼šé»æ“Šé–‹å•Ÿï¼Œå†æ¬¡é»æ“Šæˆ–é»é®ç½©é—œé–‰ã€‚

- [ ] T091 [US7] é©—è­‰ FAQ æ‰‹é¢¨ç´äº’å‹•ï¼šé»æ“Šå•é¡Œé …ç›®å±•é–‹ç­”æ¡ˆï¼Œå†æ¬¡é»æ“Šæ”¶åˆã€‚
  - è·¯å¾‘ï¼šåŒä¸Š
  - é©—æ”¶ï¼šæ¯å€‹ Q&A æ¢ç›®å¯å±•é–‹/æ”¶åˆã€‚

**æª¢æŸ¥é»**ï¼šUS7 FAQ åŸºæœ¬åŠŸèƒ½é©—æ”¶ã€‚

---

## éšæ®µ 9ï¼šè·¨åŠŸèƒ½é©—è­‰èˆ‡å“è³ªæ”¶æ–‚ (Cross-cutting Concerns)

**ç›®çš„**ï¼šè·¨è¶Šæ‰€æœ‰ User Story çš„å…¨åŸŸå“è³ªé©—è­‰ã€‚

- [ ] T100 [P] éŸ¿æ‡‰å¼è¨­è¨ˆå…¨é¢é©—è­‰ï¼šåœ¨ä»¥ä¸‹æ–·é»é©—è­‰ç‰ˆé¢å®Œæ•´æ€§ï¼š
  - iPhone SE (375px)
  - iPhone 14 Pro (393px)
  - iPad (768px)
  - Desktop (1024px)
  - Wide Desktop (1440px)
  - 4K (3840px)
  - è·¯å¾‘ï¼šå…¨åŸŸ CSS èˆ‡ Astro çµ„ä»¶
  - é©—æ”¶ï¼š6 å€‹æ–·é»æˆªåœ–ç„¡ç ´ç‰ˆã€‚

- [ ] T101 [P] è§¸æ§å€åŸŸåˆè¦é©—è­‰ï¼šæ‰€æœ‰å¯è§¸æ§å…ƒä»¶ï¼ˆDock æŒ‰éˆ•ã€æ—¥æœŸæ ¼ã€é¢æ¿é …ç›®ã€å·¥å…·æŒ‰éˆ•ï¼‰æœ€å°é¢ç© â‰¥ 44Ã—44pxã€‚
  - è·¯å¾‘ï¼š`src/styles/`
  - é©—æ”¶ï¼šChrome DevTools å…ƒç´ å°ºå¯¸æ¸¬é‡ã€‚

- [ ] T102 ç„¡éšœç¤™èªç¾©é©—è­‰ï¼šè‡ªå®šç¾©æŒ‰éˆ•å…·å‚™ `role="button"` + `aria-label`ã€‚
  - è·¯å¾‘ï¼š`src/components/`ï¼ˆæ‰€æœ‰ .astro çµ„ä»¶ï¼‰
  - é©—æ”¶ï¼šè¢å¹•é–±è®€å™¨å¯æ­£ç¢ºæœ—è®€æ¯å€‹æŒ‰éˆ•ç”¨é€”ã€‚

- [ ] T103 è‰²å½©å°æ¯”é©—è­‰ï¼šè¾²æ›†æ—¥æœŸæ–‡å­—åœ¨å„ä¸»é¡Œè‰²ä¸‹ç¬¦åˆ WCAG AA (â‰¥ 4.5:1)ã€‚
  - è·¯å¾‘ï¼š`src/styles/themes/`, `src/styles/calendar/`
  - é©—æ”¶ï¼šä½¿ç”¨ Lighthouse Accessibility æª¢æŸ¥æˆ–å°æ¯”åº¦å·¥å…·ã€‚

- [ ] T104 Zero Error æœ€çµ‚é©—è­‰ï¼šåŸ·è¡Œ `npm run lint` + `ruff check .`ï¼Œç¢ºä¿å…¨å°ˆæ¡ˆ Zero Errorsã€‚
  - è·¯å¾‘ï¼šæ ¹ç›®éŒ„
  - é©—æ”¶ï¼šå…©å€‹æŒ‡ä»¤è¼¸å‡ºå‡ç‚º 0 errorsã€‚

- [ ] T105 å®Œæ•´äº‹ä»¶æµé©—è­‰ï¼šä¾æ“š `plan.md` äº‹ä»¶å¥‘ç´„æ¸…å–®ï¼Œé©—è­‰æ‰€æœ‰ 20+ ç¨® CustomEvent çš„ç™¼é€è€…ã€æ¶ˆè²»è€…èˆ‡ Payload å‹åˆ¥ä¸€è‡´æ€§ã€‚é¡å¤–é©—è­‰ `toggle-grid` èªç¾©ä¿®æ­£å¾Œï¼Œäº‹ä»¶æµç„¡æ–·è£‚ã€‚
  - è·¯å¾‘ï¼š`src/scripts/types.ts`, å…¨åŸŸ `dispatchEvent` / `addEventListener`
  - é©—æ”¶ï¼š`grep -r 'dispatchEvent' src/` çš„æ¯å€‹äº‹ä»¶åç¨±åœ¨ types.ts ä¸­æœ‰å°æ‡‰å®šç¾©ã€‚

- [ ] T106 æ•ˆèƒ½åŸºæº–é©—è­‰ï¼š
  - é¦–å±åŠ è¼‰ â‰¤ 8 ç§’ï¼ˆSlow 3Gï¼‰
  - æ¨¡å¼åˆ‡æ› â‰¤ 200msï¼ˆPerformance é¢æ¿ï¼‰
  - èƒŒæ™¯å‹•ç•« â‰¥ 55fpsï¼ˆPerformance é¢æ¿ï¼‰
  - æ¨¡å¼åˆ‡æ› CLS = 0ï¼ˆLayout Shift è¿½è¹¤ï¼‰
  - é«˜é »å£“åŠ›æ¸¬è©¦é€šéï¼ˆ100ms é–“éš” Ã— 20 æ¬¡æ¨¡å¼åˆ‡æ›ï¼‰
  - Welcome é–’ç½®è‡ªå‹•è½‰å ´åœ¨ 6 ç§’è§¸ç™¼ï¼ˆÂ±500msï¼‰
  - Fullscreen é€²å…¥/é€€å‡ºåƒ…åœ¨ afterEnter éšæ®µåŸ·è¡Œï¼ˆgrep é©—è­‰ï¼‰
  - CSS transition åœ¨æ¨¡å¼åˆ‡æ›æœŸé–“ç¶­æŒ â‰¥ 55fps
  - è·¯å¾‘ï¼šç€è¦½å™¨ DevTools
  - é©—æ”¶ï¼šå…«é …æŒ‡æ¨™å…¨éƒ¨é”æ¨™ã€‚

- [ ] T107 æ–‡ä»¶åŒæ­¥æœ€çµ‚æ›´æ–°ï¼šç¢ºèª `SDD_v1/` ä¸‹æ‰€æœ‰å››ä»½æ–‡ä»¶ï¼ˆconstitution, spec, plan, tasksï¼‰èˆ‡å°ˆæ¡ˆå¯¦éš›ç¨‹å¼ç¢¼ä¸€è‡´ã€‚
  - è·¯å¾‘ï¼š`SDD_v1/`
  - é©—æ”¶ï¼šæ–‡ä»¶æè¿°çš„äº‹ä»¶åã€æª”æ¡ˆè·¯å¾‘ã€è¡Œç‚ºé‚è¼¯èˆ‡ç¨‹å¼ç¢¼å¯¦éš›è¡Œç‚ºä¸€è‡´ã€‚

- [ ] T108 FSM è½‰æ›è·¯å¾‘å®Œæ•´æ€§é©—è­‰ï¼šé€ä¸€åŸ·è¡Œ plan.md Â§1.2 åˆæ³•è½‰ç§»è·¯å¾‘è¡¨ä¸­çš„æ‰€æœ‰ 8 æ¢è·¯å¾‘ï¼Œç¢ºèªæ¯æ¢è·¯å¾‘çš„å‰¯ä½œç”¨ï¼ˆÂ§6 è½‰æ›å‰¯ä½œç”¨æ¸…å–®ï¼‰å…¨éƒ¨æ­£ç¢ºåŸ·è¡Œã€‚
  - æ‰‹å‹•æ¸¬è©¦æµç¨‹ï¼š
    1. Welcome â†’ Calendarï¼šç¢ºèª Dock å‡ºç¾ï¼ˆé‡‘è‰²ï¼‰ã€CalendarBoard é¡¯ç¤º
    2. Welcome â†’ Zenï¼ˆé–’ç½®6ç§’ï¼‰ï¼šç¢ºèªå…¨ UI éš±è—ã€**6 ç§’è§¸ç™¼**ï¼ˆé 15 ç§’ï¼‰
    3. Calendar â†’ Artworkï¼šç¢ºèª Dock è‰²ç³»é‡‘â†’éŠ€ã€Gallery é¡¯ç¤ºã€CalendarBoard éš±è—
    4. Calendar â†’ Noteï¼šç¢ºèªç­†è¨˜é¢æ¿å‡ºç¾
    5. Artwork â†’ Calendarï¼šç¢ºèª Dock è‰²ç³»éŠ€â†’é‡‘ã€CalendarBoard é¡¯ç¤ºã€Gallery éš±è—
    6. Artwork â†’ Zenï¼šç¢ºèªå…¨ UI éš±è—ã€Fullscreen åœ¨ `afterEnter` è§¸ç™¼/é™ç´š
    7. Zen â†’ Artworkï¼šç¢ºèª Dock é‡ç¾ï¼ˆéŠ€è‰²ï¼‰ã€Fullscreen é€€å‡ºåœ¨ `afterEnter` è§¸ç™¼
    8. Note â†’ Calendarï¼šç¢ºèªç­†è¨˜é¢æ¿é—œé–‰ã€æ—¥æ›†æ¢å¾©
  - é¡å¤–é©—è­‰ï¼š
    9. Welcome èƒŒæ™¯ clickï¼ˆcapture éšæ®µï¼‰ï¼šç¢ºèªæ¨¡å¼å®ˆè¡›æ””æˆªï¼Œä¸è§¸ç™¼ transition
    10. Artworkâ†’Zen è½‰æ›ä¸­æŒ‰ Escï¼šç¢ºèª fullscreenchange æ’å…¥ä½‡åˆ—
    11. é¢æ¿æ®˜ç•™æª¢æŸ¥ï¼šCalendarï¼ˆtoday é¢æ¿é–‹å•Ÿï¼‰â†’ Artwork â†’ æª¢æŸ¥ `activePanel === null`
    12. éŒ¯èª¤æ¢å¾©ï¼šinject ç•°å¸¸è‡³ performTransition â†’ ç¢ºèªå›æ»¾è‡³ Calendar
  - é©—æ”¶ï¼š12 æ¢æ¸¬è©¦è·¯å¾‘å…¨éƒ¨é€šéï¼Œç„¡æ®˜ç•™ classã€ç„¡é¢æ¿æ´©æ¼ã€ç„¡è¨ˆæ™‚å™¨éŒ¯èª¤ã€‚

- [ ] T109 æ•¸ä½é«˜ç´šæ„Ÿè¦–è¦ºé©—è­‰ï¼šä¾æ“š plan.md Â§æ•¸ä½é«˜ç´šæ„Ÿå¯¦ä½œæŠ€è¡“æŒ‡å—é©—è­‰ä¸‹åˆ—ç´°ç¯€ï¼š
  - å±¤ç–Šç»ç’ƒï¼šç¢ºèªåŒ…å« blur + noise + 1px specular gradient borderã€‚
  - å‘¼å¸å‹•ç•«ï¼šç¢ºèª Hero èƒŒæ™¯å…·å‚™ 60s å¾ªç’°ä¹‹æ¥µç·©æ…¢ scale å‹•ç•«ã€‚
  - ä¸»é¡Œç·©è¡ï¼šç¢ºèªè‰²å½©åˆ‡æ›æ™‚é™°å½± (box-shadow/text-shadow) åŒæ­¥ç·©å‹•ï¼Œç„¡ç¬é–“é–ƒè®Šã€‚
  - é©—æ”¶ï¼šè¦–è¦ºæ•ˆæœç¬¦åˆã€Œæ•¸ä½é«˜ç´šæ„Ÿã€èˆ‡ã€Œæ™‚é–“è—è¡“å“ã€ä¹‹å®šä½ã€‚

---

## ç›¸ä¾æ€§èˆ‡åŸ·è¡Œé †åº

### éšæ®µç›¸ä¾æ€§

- **éšæ®µ 1ï¼ˆåŸºç¤è¨­æ–½ï¼‰**ï¼šç„¡ç›¸ä¾æ€§â€”â€”å¯ç«‹å³é–‹å§‹
- **éšæ®µ 1.5ï¼ˆç‹€æ…‹æ©Ÿé‡æ§‹ï¼‰**ï¼šä¾è³´éšæ®µ 1 åŸºç¤è¨­æ–½é©—è­‰å®Œæˆã€‚**æ­¤ç‚ºæ ¸å¿ƒå‰ç½®ä¾è³´**â€”â€”å¾ŒçºŒæ‰€æœ‰ UI é©—è­‰çš„æ­£ç¢ºæ€§åŸºæ–¼æ­¤éšæ®µçš„è¼¸å‡ºã€‚
  - å»ºè­°å­éšæ®µé †åºï¼š1.5A(å®ˆè¡›) â†’ 1.5B(åŸå­class) â†’ 1.5C(ç”Ÿå‘½é€±æœŸ) â†’ 1.5D(IdleManager) â†’ 1.5E(CSSçµ±ä¸€) â†’ 1.5F(å‹åˆ¥) â†’ 1.5G(Fullscreenæ•´åˆ) â†’ 1.5H(äº‹ä»¶èªç¾©) â†’ 1.5I(æ¨¡å¼å®ˆè¡›) â†’ 1.5J(inline style) â†’ 1.5K(éŒ¯èª¤æ¢å¾©)
  - 1.5Fã€1.5I å¯èˆ‡å…¶ä»–å­éšæ®µå¹³è¡Œ
  - 1.5G ä¾è³´ 1.5A(è½‰ç§»é–) + 1.5C(ç”Ÿå‘½é€±æœŸ)
  - 1.5H å¯åœ¨ 1.5A ä¹‹å¾Œç¨ç«‹åŸ·è¡Œ
  - 1.5J ä¾è³´ 1.5E(CSSçµ±ä¸€)
  - 1.5K ä¾è³´ 1.5A(è½‰ç§»é–) + 1.5C(ç”Ÿå‘½é€±æœŸ)
- **éšæ®µ 2-4ï¼ˆP1 User Storiesï¼‰**ï¼šä¾è³´éšæ®µ 1.5 ç‹€æ…‹æ©Ÿé‡æ§‹å®Œæˆ
  - US1ï¼ˆæ­¡è¿ï¼‰ã€US2ï¼ˆæ—¥æ›†ï¼‰ã€US3ï¼ˆæ˜ ç•«ï¼‰å¯å¹³è¡Œé€²è¡Œ
  - å»ºè­°ä¾åºï¼šUS1 â†’ US2 â†’ US3ï¼ˆå› é«”é©—è·¯å¾‘ç‚º æ­¡è¿â†’æ—¥æ›†â†’æ˜ ç•«ï¼‰
- **éšæ®µ 5-6ï¼ˆP2 User Storiesï¼‰**ï¼šä¾è³´éšæ®µ 2-4 æ ¸å¿ƒé©—è­‰å®Œæˆ
  - US4ï¼ˆéŸ³æ¨‚ï¼‰èˆ‡ US5ï¼ˆä¸»é¡Œï¼‰å¯å¹³è¡Œé€²è¡Œ
- **éšæ®µ 7-8ï¼ˆP3 User Storiesï¼‰**ï¼šä¾è³´ P1 å®Œæˆ
  - US6ï¼ˆPWAï¼‰èˆ‡ US7ï¼ˆFAQï¼‰å¯å¹³è¡Œé€²è¡Œ
- **éšæ®µ 9ï¼ˆå“è³ªæ”¶æ–‚ï¼‰**ï¼šä¾è³´æ‰€æœ‰ User Story å®Œæˆ

### User Story ç›¸ä¾æ€§

- **US1ï¼ˆP1ï¼‰**ï¼šä¾è³´éšæ®µ 1.5 çš„ IdleManager ä¸‰åŸŸè¨ˆæ™‚å™¨é‡æ§‹ï¼ˆT206ï¼‰â€”â€”æ­¡è¿æ¨¡å¼çš„ 6s é–’ç½®è¨ˆæ™‚å™¨è¡Œç‚ºéœ€é‡æ§‹å¾Œæ‰èƒ½æ­£ç¢ºé©—è­‰
- **US2ï¼ˆP1ï¼‰**ï¼šä¾è³´éšæ®µ 1.5 çš„é¢æ¿ç‹€æ…‹æ¸…ç†ï¼ˆT205ï¼‰â€”â€”é¢æ¿äº’æ–¥é‚è¼¯éœ€è¦ç‹€æ…‹åŒæ­¥ä¿®æ­£
- **US3ï¼ˆP1ï¼‰**ï¼šä¾è³´éšæ®µ 1.5 çš„æ ¸å¿ƒ FSMï¼ˆT200-T204ï¼‰â€”â€”æ¨¡å¼è½‰æ›è·¯å¾‘èˆ‡ Fullscreen é™ç´šç­–ç•¥
- **US4ï¼ˆP2ï¼‰**ï¼šå¯åœ¨ US3 å®Œæˆå¾Œé–‹å§‹â€”â€”éŸ³æ¨‚æ’­æ”¾éœ€åœ¨æ˜ ç•«æ¨¡å¼ä¸‹æ¸¬è©¦
- **US5ï¼ˆP2ï¼‰**ï¼šå¯åœ¨ US2 å®Œæˆå¾Œé–‹å§‹â€”â€”ä¸»é¡Œå¼•æ“éœ€åœ¨æ—¥æ›†åˆ‡æœˆå ´æ™¯ä¸‹æ¸¬è©¦
- **US6ï¼ˆP3ï¼‰**ï¼šç¨ç«‹â€”â€”PWA åŠŸèƒ½ä¸ä¾è³´å‰è¿° Story
- **US7ï¼ˆP3ï¼‰**ï¼šå¯åœ¨ US3 å®Œæˆå¾Œé–‹å§‹â€”â€”FAQ æŒ‰éˆ•ä½æ–¼æ˜ ç•«æ¨¡å¼å³ä¸Šè§’

### å¯å¹³è¡ŒåŸ·è¡Œçš„æ©Ÿæœƒ

- æ‰€æœ‰æ¨™è¨˜ [P] çš„åŸºç¤è¨­æ–½ä»»å‹™ï¼ˆT001-T006ï¼‰å¯å¹³è¡ŒåŸ·è¡Œ
- éšæ®µ 1.5 ä¸­ T203ã€T209ã€T213 å¯å¹³è¡ŒåŸ·è¡Œï¼ˆå¸¸é‡å®šç¾© + å‹åˆ¥ä¿®è£œ + æ¨¡å¼å®ˆè¡›äº’ä¸å¹²æ“¾ï¼‰
- éšæ®µ 1.5 ä¸­ T214ã€T215 å¯å¹³è¡ŒåŸ·è¡Œï¼ˆlayoutManager + modeUIManager inline style æ¸…é™¤äº’ä¸å¹²æ“¾ï¼‰
- éšæ®µ 1.5 ä¸­ T212ï¼ˆäº‹ä»¶èªç¾©ï¼‰å¯åœ¨ T200 å¾Œç¨ç«‹åŸ·è¡Œ
- US1 ä¸­ T013/T014 å¯å¹³è¡ŒåŸ·è¡Œï¼ˆé¦–åœ– + å¹³è¡Œé ç†±é©—è­‰äº’ä¸å¹²æ“¾ï¼‰
- US2 ä¸­ T024/T027 å¯å¹³è¡ŒåŸ·è¡Œ
- US3 ä¸­ T043/T046/T047/T057/T058 å¯å¹³è¡ŒåŸ·è¡Œ
- US4 ä¸­ T063/T068 å¯å¹³è¡ŒåŸ·è¡Œ
- US5 ä¸­ T074 å¯å¹³è¡ŒåŸ·è¡Œ
- US6 ä¸­ T082 å¯å¹³è¡ŒåŸ·è¡Œ
- éšæ®µ 9 ä¸­ T100/T101/T102/T103 å¯å¹³è¡ŒåŸ·è¡Œ

---

## å¯¦ä½œç­–ç•¥

### å…ˆå®Œæˆæ ¸å¿ƒé‡æ§‹ï¼ˆéšæ®µ 1 + 1.5ï¼‰ï¼Œå†é©—è­‰åŠŸèƒ½

1. å®Œæˆéšæ®µ 1ï¼šåŸºç¤è¨­æ–½é©—è­‰
2. å®Œæˆéšæ®µ 1.5ï¼šç‹€æ…‹æ©Ÿæ ¸å¿ƒé‡æ§‹ â† **é—œéµè·¯å¾‘**
   - 1.5A: FSM è½‰ç§»å®ˆè¡› + è½‰ç§»é–
   - 1.5B: Body Class åŸå­æ›¿æ›
   - 1.5C: å››éšæ®µè½‰æ›ç”Ÿå‘½é€±æœŸ
   - 1.5D: IdleManager ä¸‰åŸŸé‡æ§‹
   - 1.5E: UI å¯è¦‹æ€§ CSS çµ±ä¸€åŒ–
   - 1.5F: å‹åˆ¥å®‰å…¨ä¿®è£œ
   - 1.5G: Fullscreen ç”Ÿå‘½é€±æœŸæ•´åˆ â† **æ–°å¢**
   - 1.5H: toggle-grid äº‹ä»¶èªç¾©ä¿®æ­£ â† **æ–°å¢**
   - 1.5I: Background Click æ¨¡å¼å®ˆè¡› â† **æ–°å¢**
   - 1.5J: inline style æ¸…é™¤ â† **æ–°å¢**
   - 1.5K: éŒ¯èª¤æ¢å¾©æ©Ÿåˆ¶ â† **æ–°å¢**
3. **åœæ­¢ä¸¦å£“åŠ›æ¸¬è©¦**ï¼šé«˜é »æ¨¡å¼åˆ‡æ› 20 æ¬¡ + CLS é©—è­‰ + Performance Profile 
4. å®Œæˆæ ¸å¿ƒé‡æ§‹å¾Œï¼Œå¾ŒçºŒ User Story é©—è­‰çš„å¯ä¿¡åº¦å¤§å¹…æå‡

### æ¼¸é€²å¼äº¤ä»˜

1. æ ¸å¿ƒé‡æ§‹å®Œæˆï¼ˆéšæ®µ 1.5ï¼‰â†’ æ¨¡å¼è½‰æ›æµæš¢åº¦å·²ä¿éšœ
2. MVP é©—è­‰ï¼ˆUS1â†’US2â†’US3ï¼‰â†’ æ ¸å¿ƒé«”é©—å·²å°±ç·’
3. åŠ å…¥ US4ï¼ˆéŸ³æ¨‚ï¼‰+ US5ï¼ˆä¸»é¡Œï¼‰â†’ è¦–è½é«”é©—å®Œå–„
4. åŠ å…¥ US6ï¼ˆPWAï¼‰+ US7ï¼ˆFAQï¼‰â†’ å®‰è£èƒ½åŠ›èˆ‡å¼•å°å®Œå–„
5. åŸ·è¡Œéšæ®µ 9 å“è³ªæ”¶æ–‚ â†’ å…¨é¢é”æ¨™

---

## å‚™è¨»

- `[P]` ä»»å‹™ = ä¸åŒæª”æ¡ˆã€ç„¡ç›¸ä¾æ€§ï¼Œå¯åŒæ™‚é€²è¡Œ
- `[Story]` æ¨™ç±¤å°‡ä»»å‹™å°æ‡‰åˆ°ç‰¹å®š User Story
- `[US*]` æ¨™ç±¤ä»£è¡¨è·¨ User Story çš„åŸºç¤è¨­æ–½ä»»å‹™
- æ¯å€‹ User Story æ‡‰å¯ç¨ç«‹å®Œæˆã€ç¨ç«‹æ¸¬è©¦
- æ¯å®Œæˆä¸€å€‹ä»»å‹™æˆ–é‚è¼¯ç¾¤çµ„å°±æäº¤ä¸€æ¬¡
- å¯åœ¨ä»»ä½•æª¢æŸ¥é»åœä¸‹ä¾†ï¼Œç¨ç«‹é©—è­‰è©² User Story
- å› æœ¬å°ˆæ¡ˆç‚º Brownfieldï¼Œå¤§éƒ¨åˆ†ä»»å‹™ç‚ºã€Œé©—è­‰ (V)ã€è€Œéã€Œå»ºç«‹ (C)ã€â€”â€”ç™¼ç¾ç¼ºé™·æ™‚å°±åœ°ä¿®å¾©
- **éšæ®µ 1.5 ç‚ºä¾‹å¤–**â€”â€”é€™äº›æ˜¯ä¸»å‹•é‡æ§‹ä»»å‹™ (C)ï¼Œå› ä»£ç¢¼å¯©é–±ç™¼ç¾çš„çµæ§‹æ€§å•é¡Œéœ€è¦åœ¨åŠŸèƒ½é©—è­‰å‰ä¿®æ­£
- **æ–°å¢ T210-T216** ç‚ºç¬¬äºŒè¼ªä»£ç¢¼å¯©é–±ç™¼ç¾çš„é—œéµå•é¡Œï¼ˆFullscreen æ•£è½ã€Welcome è¶…æ™‚ã€äº‹ä»¶èªç¾©ã€inline styleã€éŒ¯èª¤æ¢å¾©ï¼‰
- é¿å…ï¼šæ¨¡ç³Šä¸æ¸…çš„ä»»å‹™ã€åŒæª”æ¡ˆè¡çªã€è·¨ User Story çš„ç›¸ä¾æ€§ç ´å£ç¨ç«‹æ€§
- æ–°å¢ä»»å‹™ ID å¾ T200 é–‹å§‹ï¼Œèˆ‡åŸæœ‰ T001-T107 ç·¨è™Ÿå€éš”
